{
  "methods": {
    "Getinfo": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "additionalProperties": false,
        "properties": {}
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id",
          "alias",
          "color",
          "num_peers",
          "num_pending_channels",
          "num_active_channels",
          "num_inactive_channels",
          "version",
          "blockheight",
          "network",
          "fees_collected_msat",
          "lightning-dir"
        ],
        "properties": {
          "id": {
            "type": "pubkey",
            "description": "The public key unique to this node"
          },
          "alias": {
            "type": "string",
            "description": "The fun alias this node will advertize",
            "maxLength": 32
          },
          "color": {
            "type": "hex",
            "description": "The favorite RGB color this node will advertize",
            "minLength": 6,
            "maxLength": 6
          },
          "num_peers": {
            "type": "u32",
            "description": "The total count of peers, connected or with channels"
          },
          "num_pending_channels": {
            "type": "u32",
            "description": "The total count of channels being opened"
          },
          "num_active_channels": {
            "type": "u32",
            "description": "The total count of channels in normal state"
          },
          "num_inactive_channels": {
            "type": "u32",
            "description": "The total count of channels waiting for opening or closing transactions to be mined"
          },
          "version": {
            "type": "string",
            "description": "Identifies what bugs you are running into"
          },
          "lightning-dir": {
            "type": "string",
            "description": "Identifies where you can find the configuration and other related files"
          },
          "our_features": {
            "type": "object",
            "description": "Our BOLT #9 feature bits (as hexstring) for various contexts",
            "additionalProperties": true,
            "required": [
              "init",
              "node",
              "channel",
              "invoice"
            ],
            "properties": {
              "init": {
                "type": "hex",
                "description": "features (incl. globalfeatures) in our init message, these also restrict what we offer in open_channel or accept in accept_channel"
              },
              "node": {
                "type": "hex",
                "description": "features in our node_announcement message"
              },
              "channel": {
                "type": "hex",
                "description": "negotiated channel features we (as channel initiator) publish in the channel_announcement message"
              },
              "invoice": {
                "type": "hex",
                "description": "features in our BOLT11 invoices"
              }
            }
          },
          "blockheight": {
            "type": "u32",
            "description": "The highest block height we've learned"
          },
          "network": {
            "type": "string",
            "description": "represents the type of network on the node are working (e.g: `bitcoin`, `testnet`, or `regtest`)"
          },
          "msatoshi_fees_collected": {
            "type": "u64",
            "deprecated": true
          },
          "fees_collected_msat": {
            "type": "msat",
            "description": "Total routing fees collected by this node"
          },
          "address": {
            "type": "array",
            "description": "The addresses we announce to the world",
            "items": {
              "type": "object",
              "required": [
                "type",
                "port"
              ],
              "additionalProperties": true,
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "dns",
                    "ipv4",
                    "ipv6",
                    "torv2",
                    "torv3",
                    "websocket"
                  ],
                  "description": "Type of connection"
                },
                "port": {
                  "type": "u16",
                  "description": "port number"
                }
              },
              "if": {
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "dns",
                      "ipv4",
                      "ipv6",
                      "torv2",
                      "torv3"
                    ]
                  }
                }
              },
              "then": {
                "required": [
                  "type",
                  "address",
                  "port"
                ],
                "additionalProperties": false,
                "properties": {
                  "type": {},
                  "port": {},
                  "address": {
                    "type": "string",
                    "description": "address in expected format for **type**"
                  }
                }
              },
              "else": {
                "required": [
                  "type",
                  "port"
                ],
                "additionalProperties": false,
                "properties": {
                  "type": {},
                  "port": {}
                }
              }
            }
          },
          "binding": {
            "type": "array",
            "description": "The addresses we are listening on",
            "items": {
              "type": "object",
              "required": [
                "type"
              ],
              "additionalProperties": false,
              "properties": {
                "type": {
                  "type": "string",
                  "*FIXME*": "The variant in connect.schema.json is more complete",
                  "enum": [
                    "local socket",
                    "ipv4",
                    "ipv6",
                    "torv2",
                    "torv3"
                  ],
                  "description": "Type of connection"
                },
                "address": {
                  "type": "string",
                  "description": "address in expected format for **type**"
                },
                "port": {
                  "type": "u16",
                  "description": "port number"
                },
                "socket": {
                  "type": "string",
                  "description": "socket filename (only if **type** is \"local socket\")"
                }
              }
            }
          },
          "warning_bitcoind_sync": {
            "type": "string",
            "description": "Bitcoind is not up-to-date with network."
          },
          "warning_lightningd_sync": {
            "type": "string",
            "description": "Lightningd is still loading latest blocks from bitcoind."
          }
        }
      }
    },
    "ListPeers": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "pubkey",
            "description": "If supplied, limits the result to just the peer with the given ID, if it exists."
          },
          "level": {
            "type": "string",
            "description": "Supplying level will show log entries related to that peer at the given log level. Valid log levels are \u201cio\u201d, \u201cdebug\u201d, \u201cinfo\u201d, and \u201cunusual\u201d."
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "peers"
        ],
        "properties": {
          "peers": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true,
              "required": [
                "id",
                "connected",
                "channels"
              ],
              "properties": {
                "id": {
                  "type": "pubkey",
                  "description": "the public key of the peer"
                },
                "connected": {
                  "type": "boolean",
                  "description": "True if the peer is currently connected"
                },
                "log": {
                  "type": "array",
                  "description": "if *level* is specified, logs for this peer",
                  "items": {
                    "type": "object",
                    "additionalProperties": true,
                    "required": [
                      "type"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": [
                          "SKIPPED",
                          "BROKEN",
                          "UNUSUAL",
                          "INFO",
                          "DEBUG",
                          "IO_IN",
                          "IO_OUT"
                        ]
                      }
                    },
                    "allOf": [
                      {
                        "if": {
                          "properties": {
                            "type": {
                              "enum": [
                                "SKIPPED"
                              ]
                            }
                          }
                        },
                        "then": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "num_skipped"
                          ],
                          "properties": {
                            "type": {},
                            "num_skipped": {
                              "type": "u32",
                              "description": "number of deleted/omitted entries"
                            }
                          }
                        }
                      },
                      {
                        "if": {
                          "properties": {
                            "type": {
                              "enum": [
                                "BROKEN",
                                "UNUSUAL",
                                "INFO",
                                "DEBUG"
                              ]
                            }
                          }
                        },
                        "then": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "time",
                            "source",
                            "log",
                            "node_id"
                          ],
                          "properties": {
                            "type": {},
                            "time": {
                              "type": "string",
                              "description": "UNIX timestamp with 9 decimal places"
                            },
                            "source": {
                              "type": "string",
                              "description": "The particular logbook this was found in"
                            },
                            "log": {
                              "type": "string",
                              "description": "The actual log message"
                            },
                            "node_id": {
                              "type": "pubkey",
                              "description": "The peer this is associated with"
                            }
                          }
                        }
                      },
                      {
                        "if": {
                          "properties": {
                            "type": {
                              "enum": [
                                "IO_IN",
                                "IO_OUT"
                              ]
                            }
                          }
                        },
                        "then": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "time",
                            "source",
                            "log",
                            "node_id",
                            "data"
                          ],
                          "properties": {
                            "type": {},
                            "time": {
                              "type": "string",
                              "description": "UNIX timestamp with 9 decimal places"
                            },
                            "source": {
                              "type": "string",
                              "description": "The particular logbook this was found in"
                            },
                            "log": {
                              "type": "string",
                              "description": "The actual log message"
                            },
                            "node_id": {
                              "type": "pubkey",
                              "description": "The peer this is associated with"
                            },
                            "data": {
                              "type": "hex",
                              "description": "The IO which occurred"
                            }
                          }
                        }
                      }
                    ]
                  }
                },
                "channels": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": true,
                    "required": [
                      "state",
                      "opener",
                      "features"
                    ],
                    "properties": {
                      "state": {
                        "type": "string",
                        "enum": [
                          "OPENINGD",
                          "CHANNELD_AWAITING_LOCKIN",
                          "CHANNELD_NORMAL",
                          "CHANNELD_SHUTTING_DOWN",
                          "CLOSINGD_SIGEXCHANGE",
                          "CLOSINGD_COMPLETE",
                          "AWAITING_UNILATERAL",
                          "FUNDING_SPEND_SEEN",
                          "ONCHAIN",
                          "DUALOPEND_OPEN_INIT",
                          "DUALOPEND_AWAITING_LOCKIN"
                        ],
                        "description": "the channel state, in particular \"CHANNELD_NORMAL\" means the channel can be used normally"
                      },
                      "scratch_txid": {
                        "type": "txid",
                        "description": "The txid we would use if we went onchain now"
                      },
                      "feerate": {
                        "type": "object",
                        "description": "Feerates for the current tx",
                        "additionalProperties": false,
                        "required": [
                          "perkw",
                          "perkb"
                        ],
                        "properties": {
                          "perkw": {
                            "type": "u32",
                            "description": "Feerate per 1000 weight (i.e kSipa)"
                          },
                          "perkb": {
                            "type": "u32",
                            "description": "Feerate per 1000 virtual bytes"
                          }
                        }
                      },
                      "owner": {
                        "type": "string",
                        "description": "The current subdaemon controlling this connection"
                      },
                      "short_channel_id": {
                        "type": "short_channel_id",
                        "description": "The short_channel_id (once locked in)"
                      },
                      "channel_id": {
                        "type": "hash",
                        "description": "The full channel_id",
                        "minLength": 64,
                        "maxLength": 64
                      },
                      "funding_txid": {
                        "type": "txid",
                        "description": "ID of the funding transaction"
                      },
                      "funding_outnum": {
                        "type": "u32",
                        "description": "The 0-based output number of the funding transaction which opens the channel"
                      },
                      "initial_feerate": {
                        "type": "string",
                        "description": "For inflight opens, the first feerate used to initiate the channel open"
                      },
                      "last_feerate": {
                        "type": "string",
                        "description": "For inflight opens, the most recent feerate used on the channel open"
                      },
                      "next_feerate": {
                        "type": "string",
                        "description": "For inflight opens, the next feerate we'll use for the channel open"
                      },
                      "next_fee_step": {
                        "type": "u32",
                        "description": "For inflight opens, the next feerate step we'll use for the channel open"
                      },
                      "inflight": {
                        "type": "array",
                        "description": "Current candidate funding transactions (only for dual-funding)",
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "funding_txid",
                            "funding_outnum",
                            "feerate",
                            "total_funding_msat",
                            "our_funding_msat",
                            "scratch_txid"
                          ],
                          "properties": {
                            "funding_txid": {
                              "type": "txid",
                              "description": "ID of the funding transaction"
                            },
                            "funding_outnum": {
                              "type": "u32",
                              "description": "The 0-based output number of the funding transaction which opens the channel"
                            },
                            "feerate": {
                              "type": "string",
                              "description": "The feerate for this funding transaction in per-1000-weight, with \"kpw\" appended"
                            },
                            "total_funding_msat": {
                              "type": "msat",
                              "description": "total amount in the channel"
                            },
                            "our_funding_msat": {
                              "type": "msat",
                              "description": "amount we have in the channel"
                            },
                            "scratch_txid": {
                              "type": "txid",
                              "description": "The commitment transaction txid we would use if we went onchain now"
                            }
                          }
                        }
                      },
                      "close_to": {
                        "type": "hex",
                        "description": "scriptPubkey which we have to close to if we mutual close"
                      },
                      "private": {
                        "type": "boolean",
                        "description": "if False, we will not announce this channel"
                      },
                      "opener": {
                        "type": "string",
                        "enum": [
                          "local",
                          "remote"
                        ],
                        "description": "Who initiated the channel"
                      },
                      "closer": {
                        "type": "string",
                        "enum": [
                          "local",
                          "remote"
                        ],
                        "description": "Who initiated the channel close"
                      },
                      "features": {
                        "type": "array",
                        "items": {
                          "type": "string",
                          "enum": [
                            "option_static_remotekey",
                            "option_anchor_outputs",
                            "option_zeroconf"
                          ],
                          "description": "BOLT #9 features which apply to this channel"
                        }
                      },
                      "funding": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": [
                          "local_funds_msat",
                          "remote_funds_msat"
                        ],
                        "properties": {
                          "local_msat": {
                            "type": "msat",
                            "description": "Amount of channel we funded (deprecated)"
                          },
                          "remote_msat": {
                            "type": "msat",
                            "description": "Amount of channel they funded (deprecated)"
                          },
                          "pushed_msat": {
                            "type": "msat",
                            "description": "Amount pushed from opener to peer"
                          },
                          "local_funds_msat": {
                            "type": "msat",
                            "description": "Amount of channel we funded"
                          },
                          "remote_funds_msat": {
                            "type": "msat",
                            "description": "Amount of channel they funded"
                          },
                          "fee_paid_msat": {
                            "type": "msat",
                            "description": "Amount we paid peer at open"
                          },
                          "fee_rcvd_msat": {
                            "type": "msat",
                            "description": "Amount we were paid by peer at open"
                          }
                        }
                      },
                      "to_us_msat": {
                        "type": "msat",
                        "description": "how much of channel is owed to us"
                      },
                      "min_to_us_msat": {
                        "type": "msat",
                        "description": "least amount owed to us ever"
                      },
                      "max_to_us_msat": {
                        "type": "msat",
                        "description": "most amount owed to us ever"
                      },
                      "total_msat": {
                        "type": "msat",
                        "description": "total amount in the channel"
                      },
                      "fee_base_msat": {
                        "type": "msat",
                        "description": "amount we charge to use the channel"
                      },
                      "fee_proportional_millionths": {
                        "type": "u32",
                        "description": "amount we charge to use the channel in parts-per-million"
                      },
                      "dust_limit_msat": {
                        "type": "msat",
                        "description": "minimum amount for an output on the channel transactions"
                      },
                      "max_total_htlc_in_msat": {
                        "type": "msat",
                        "description": "max amount accept in a single payment"
                      },
                      "their_reserve_msat": {
                        "type": "msat",
                        "description": "minimum we insist they keep in channel"
                      },
                      "our_reserve_msat": {
                        "type": "msat",
                        "description": "minimum they insist we keep in channel"
                      },
                      "spendable_msat": {
                        "type": "msat",
                        "description": "total we could send through channel"
                      },
                      "receivable_msat": {
                        "type": "msat",
                        "description": "total peer could send through channel"
                      },
                      "minimum_htlc_in_msat": {
                        "type": "msat",
                        "description": "the minimum amount HTLC we accept"
                      },
                      "minimum_htlc_out_msat": {
                        "type": "msat",
                        "description": "the minimum amount HTLC we will send"
                      },
                      "maximum_htlc_out_msat": {
                        "type": "msat",
                        "description": "the maximum amount HTLC we will send"
                      },
                      "their_to_self_delay": {
                        "type": "u32",
                        "description": "the number of blocks before they can take their funds if they unilateral close"
                      },
                      "our_to_self_delay": {
                        "type": "u32",
                        "description": "the number of blocks before we can take our funds if we unilateral close"
                      },
                      "max_accepted_htlcs": {
                        "type": "u32",
                        "description": "Maximum number of incoming HTLC we will accept at once"
                      },
                      "msatoshi_to_us": {
                        "deprecated": true
                      },
                      "msatoshi_to_us_min": {
                        "deprecated": true
                      },
                      "msatoshi_to_us_max": {
                        "deprecated": true
                      },
                      "msatoshi_total": {
                        "deprecated": true
                      },
                      "dust_limit_satoshis": {
                        "deprecated": true
                      },
                      "max_htlc_value_in_flight_msat": {
                        "deprecated": true
                      },
                      "our_channel_reserve_satoshis": {
                        "deprecated": true
                      },
                      "their_channel_reserve_satoshis": {
                        "deprecated": true
                      },
                      "spendable_msatoshi": {
                        "deprecated": true
                      },
                      "receivable_msatoshi": {
                        "deprecated": true
                      },
                      "htlc_minimum_msat": {
                        "deprecated": true
                      },
                      "alias": {
                        "type": "object",
                        "required": [],
                        "properties": {
                          "local": {
                            "type": "short_channel_id",
                            "description": "An alias assigned by this node to this channel, used for outgoing payments"
                          },
                          "remote": {
                            "type": "short_channel_id",
                            "description": "An alias assigned by the remote node to this channel, usable in routehints and invoices"
                          }
                        }
                      },
                      "state_changes": {
                        "type": "array",
                        "description": "Prior state changes",
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "timestamp",
                            "old_state",
                            "new_state",
                            "cause",
                            "message"
                          ],
                          "properties": {
                            "timestamp": {
                              "type": "string",
                              "description": "UTC timestamp of form YYYY-mm-ddTHH:MM:SS.%03dZ"
                            },
                            "old_state": {
                              "type": "string",
                              "enum": [
                                "OPENINGD",
                                "CHANNELD_AWAITING_LOCKIN",
                                "CHANNELD_NORMAL",
                                "CHANNELD_SHUTTING_DOWN",
                                "CLOSINGD_SIGEXCHANGE",
                                "CLOSINGD_COMPLETE",
                                "AWAITING_UNILATERAL",
                                "FUNDING_SPEND_SEEN",
                                "ONCHAIN",
                                "DUALOPEND_OPEN_INIT",
                                "DUALOPEND_AWAITING_LOCKIN"
                              ],
                              "description": "Previous state"
                            },
                            "new_state": {
                              "type": "string",
                              "enum": [
                                "OPENINGD",
                                "CHANNELD_AWAITING_LOCKIN",
                                "CHANNELD_NORMAL",
                                "CHANNELD_SHUTTING_DOWN",
                                "CLOSINGD_SIGEXCHANGE",
                                "CLOSINGD_COMPLETE",
                                "AWAITING_UNILATERAL",
                                "FUNDING_SPEND_SEEN",
                                "ONCHAIN",
                                "DUALOPEND_OPEN_INIT",
                                "DUALOPEND_AWAITING_LOCKIN"
                              ],
                              "description": "New state"
                            },
                            "cause": {
                              "type": "string",
                              "enum": [
                                "unknown",
                                "local",
                                "user",
                                "remote",
                                "protocol",
                                "onchain"
                              ],
                              "description": "What caused the change"
                            },
                            "message": {
                              "type": "string",
                              "description": "Human-readable explanation"
                            }
                          }
                        }
                      },
                      "status": {
                        "type": "array",
                        "items": {
                          "type": "string",
                          "description": "Billboard log of significant changes"
                        }
                      },
                      "in_payments_offered": {
                        "type": "u64",
                        "description": "Number of incoming payment attempts"
                      },
                      "in_offered_msat": {
                        "type": "msat",
                        "description": "Total amount of incoming payment attempts"
                      },
                      "in_msatoshi_offered": {
                        "deprecated": true
                      },
                      "in_payments_fulfilled": {
                        "type": "u64",
                        "description": "Number of successful incoming payment attempts"
                      },
                      "in_fulfilled_msat": {
                        "type": "msat",
                        "description": "Total amount of successful incoming payment attempts"
                      },
                      "in_msatoshi_fulfilled": {
                        "deprecated": true
                      },
                      "out_payments_offered": {
                        "type": "u64",
                        "description": "Number of outgoing payment attempts"
                      },
                      "out_offered_msat": {
                        "type": "msat",
                        "description": "Total amount of outgoing payment attempts"
                      },
                      "out_msatoshi_offered": {
                        "deprecated": true
                      },
                      "out_payments_fulfilled": {
                        "type": "u64",
                        "description": "Number of successful outgoing payment attempts"
                      },
                      "out_fulfilled_msat": {
                        "type": "msat",
                        "description": "Total amount of successful outgoing payment attempts"
                      },
                      "out_msatoshi_fulfilled": {
                        "deprecated": true
                      },
                      "htlcs": {
                        "type": "array",
                        "description": "current HTLCs in this channel",
                        "items": {
                          "type": "object",
                          "additionalProperties": true,
                          "required": [
                            "direction",
                            "id",
                            "amount_msat",
                            "expiry",
                            "payment_hash",
                            "state"
                          ],
                          "properties": {
                            "direction": {
                              "type": "string",
                              "enum": [
                                "in",
                                "out"
                              ],
                              "description": "Whether it came from peer, or is going to peer"
                            },
                            "id": {
                              "type": "u64",
                              "description": "Unique ID for this htlc on this channel in this direction"
                            },
                            "amount_msat": {
                              "type": "msat",
                              "description": "Amount send/received for this HTLC"
                            },
                            "msatoshi": {
                              "deprecated": true
                            },
                            "expiry": {
                              "type": "u32",
                              "description": "Block this HTLC expires at"
                            },
                            "payment_hash": {
                              "type": "hash",
                              "description": "the hash of the payment_preimage which will prove payment",
                              "maxLength": 64,
                              "minLength": 64
                            },
                            "local_trimmed": {
                              "type": "boolean",
                              "enum": [
                                true
                              ],
                              "description": "if this is too small to enforce onchain"
                            },
                            "status": {
                              "type": "string",
                              "description": "set if this HTLC is currently waiting on a hook (and shows what plugin)"
                            }
                          },
                          "allOf": [
                            {
                              "if": {
                                "properties": {
                                  "direction": {
                                    "enum": [
                                      "out"
                                    ]
                                  }
                                }
                              },
                              "then": {
                                "additionalProperties": false,
                                "required": [
                                  "state"
                                ],
                                "properties": {
                                  "direction": {},
                                  "id": {},
                                  "amount_msat": {},
                                  "msatoshi": {},
                                  "expiry": {},
                                  "payment_hash": {},
                                  "local_trimmed": {},
                                  "status": {},
                                  "alias": {},
                                  "state": {
                                    "type": "string",
                                    "enum": [
                                      "SENT_ADD_HTLC",
                                      "SENT_ADD_COMMIT",
                                      "RCVD_ADD_REVOCATION",
                                      "RCVD_ADD_ACK_COMMIT",
                                      "SENT_ADD_ACK_REVOCATION",
                                      "RCVD_REMOVE_HTLC",
                                      "RCVD_REMOVE_COMMIT",
                                      "SENT_REMOVE_REVOCATION",
                                      "SENT_REMOVE_ACK_COMMIT",
                                      "RCVD_REMOVE_ACK_REVOCATION"
                                    ],
                                    "description": "Status of the HTLC"
                                  }
                                }
                              }
                            },
                            {
                              "if": {
                                "properties": {
                                  "direction": {
                                    "enum": [
                                      "in"
                                    ]
                                  }
                                }
                              },
                              "then": {
                                "additionalProperties": false,
                                "required": [
                                  "state"
                                ],
                                "properties": {
                                  "direction": {},
                                  "id": {},
                                  "amount_msat": {},
                                  "msatoshi": {},
                                  "expiry": {},
                                  "payment_hash": {},
                                  "local_trimmed": {},
                                  "status": {},
                                  "state": {
                                    "type": "string",
                                    "enum": [
                                      "RCVD_ADD_HTLC",
                                      "RCVD_ADD_COMMIT",
                                      "SENT_ADD_REVOCATION",
                                      "SENT_ADD_ACK_COMMIT",
                                      "RCVD_ADD_ACK_REVOCATION",
                                      "SENT_REMOVE_HTLC",
                                      "SENT_REMOVE_COMMIT",
                                      "RCVD_REMOVE_REVOCATION",
                                      "RCVD_REMOVE_ACK_COMMIT",
                                      "SENT_REMOVE_ACK_REVOCATION"
                                    ],
                                    "description": "Status of the HTLC"
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    },
                    "allOf": [
                      {
                        "if": {
                          "required": [
                            "close_to"
                          ]
                        },
                        "then": {
                          "additionalProperties": false,
                          "required": [],
                          "properties": {
                            "state": {},
                            "scratch_txid": {},
                            "feerate": {},
                            "owner": {},
                            "short_channel_id": {},
                            "channel_id": {},
                            "funding_txid": {},
                            "funding_outnum": {},
                            "close_to": {},
                            "private": {},
                            "alias": {},
                            "opener": {},
                            "closer": {},
                            "features": {},
                            "funding": {},
                            "to_us_msat": {},
                            "min_to_us_msat": {},
                            "max_to_us_msat": {},
                            "total_msat": {},
                            "fee_base_msat": {},
                            "fee_proportional_millionths": {},
                            "dust_limit_msat": {},
                            "max_total_htlc_in_msat": {},
                            "their_reserve_msat": {},
                            "our_reserve_msat": {},
                            "spendable_msat": {},
                            "receivable_msat": {},
                            "minimum_htlc_in_msat": {},
                            "minimum_htlc_out_msat": {},
                            "maximum_htlc_out_msat": {},
                            "spendable_msatoshi": {},
                            "receivable_msatoshi": {},
                            "their_to_self_delay": {},
                            "our_to_self_delay": {},
                            "max_accepted_htlcs": {},
                            "msatoshi_to_us": {},
                            "msatoshi_to_us_min": {},
                            "msatoshi_to_us_max": {},
                            "msatoshi_total": {},
                            "dust_limit_satoshis": {},
                            "max_htlc_value_in_flight_msat": {},
                            "our_channel_reserve_satoshis": {},
                            "their_channel_reserve_satoshis": {},
                            "spendable_satoshis": {},
                            "receivable_satoshis": {},
                            "htlc_minimum_msat": {},
                            "state_changes": {},
                            "status": {},
                            "in_payments_offered": {},
                            "in_offered_msat": {},
                            "in_msatoshi_offered": {},
                            "in_payments_fulfilled": {},
                            "in_fulfilled_msat": {},
                            "in_msatoshi_fulfilled": {},
                            "out_payments_offered": {},
                            "out_offered_msat": {},
                            "out_msatoshi_offered": {},
                            "out_payments_fulfilled": {},
                            "out_fulfilled_msat": {},
                            "out_msatoshi_fulfilled": {},
                            "htlcs": {},
                            "initial_feerate": {},
                            "last_feerate": {},
                            "next_feerate": {},
                            "inflight": {},
                            "last_tx_fee_msat": {},
                            "direction": {},
                            "close_to_addr": {
                              "type": "string",
                              "description": "The bitcoin address we will close to"
                            }
                          }
                        }
                      },
                      {
                        "if": {
                          "required": [
                            "scratch_txid"
                          ]
                        },
                        "then": {
                          "additionalProperties": false,
                          "required": [
                            "last_tx_fee_msat"
                          ],
                          "properties": {
                            "state": {},
                            "alias": {},
                            "scratch_txid": {},
                            "feerate": {},
                            "owner": {},
                            "short_channel_id": {},
                            "channel_id": {},
                            "funding_txid": {},
                            "funding_outnum": {},
                            "inflight": {},
                            "close_to": {},
                            "private": {},
                            "opener": {},
                            "closer": {},
                            "features": {},
                            "funding": {},
                            "to_us_msat": {},
                            "min_to_us_msat": {},
                            "max_to_us_msat": {},
                            "total_msat": {},
                            "fee_base_msat": {},
                            "fee_proportional_millionths": {},
                            "dust_limit_msat": {},
                            "max_total_htlc_in_msat": {},
                            "their_reserve_msat": {},
                            "our_reserve_msat": {},
                            "spendable_msat": {},
                            "receivable_msat": {},
                            "minimum_htlc_in_msat": {},
                            "minimum_htlc_out_msat": {},
                            "maximum_htlc_out_msat": {},
                            "spendable_msatoshi": {},
                            "receivable_msatoshi": {},
                            "their_to_self_delay": {},
                            "our_to_self_delay": {},
                            "max_accepted_htlcs": {},
                            "msatoshi_to_us": {},
                            "msatoshi_to_us_min": {},
                            "msatoshi_to_us_max": {},
                            "msatoshi_total": {},
                            "dust_limit_satoshis": {},
                            "max_htlc_value_in_flight_msat": {},
                            "our_channel_reserve_satoshis": {},
                            "their_channel_reserve_satoshis": {},
                            "spendable_satoshis": {},
                            "receivable_satoshis": {},
                            "htlc_minimum_msat": {},
                            "state_changes": {},
                            "status": {},
                            "in_payments_offered": {},
                            "in_offered_msat": {},
                            "in_msatoshi_offered": {},
                            "in_payments_fulfilled": {},
                            "in_fulfilled_msat": {},
                            "in_msatoshi_fulfilled": {},
                            "out_payments_offered": {},
                            "out_offered_msat": {},
                            "out_msatoshi_offered": {},
                            "out_payments_fulfilled": {},
                            "out_fulfilled_msat": {},
                            "out_msatoshi_fulfilled": {},
                            "htlcs": {},
                            "initial_feerate": {},
                            "last_feerate": {},
                            "next_feerate": {},
                            "close_to_addr": {},
                            "direction": {},
                            "last_tx_fee_msat": {
                              "type": "msat",
                              "description": "fee attached to this the current tx"
                            }
                          }
                        }
                      },
                      {
                        "if": {
                          "required": [
                            "short_channel_id"
                          ]
                        },
                        "then": {
                          "additionalProperties": false,
                          "required": [
                            "direction"
                          ],
                          "properties": {
                            "alias": {},
                            "state": {},
                            "scratch_txid": {},
                            "feerate": {},
                            "owner": {},
                            "short_channel_id": {},
                            "channel_id": {},
                            "funding_txid": {},
                            "funding_outnum": {},
                            "inflight": {},
                            "close_to": {},
                            "private": {},
                            "opener": {},
                            "closer": {},
                            "features": {},
                            "funding": {},
                            "to_us_msat": {},
                            "min_to_us_msat": {},
                            "max_to_us_msat": {},
                            "total_msat": {},
                            "fee_base_msat": {},
                            "fee_proportional_millionths": {},
                            "dust_limit_msat": {},
                            "max_total_htlc_in_msat": {},
                            "their_reserve_msat": {},
                            "our_reserve_msat": {},
                            "spendable_msat": {},
                            "receivable_msat": {},
                            "minimum_htlc_in_msat": {},
                            "minimum_htlc_out_msat": {},
                            "maximum_htlc_out_msat": {},
                            "spendable_msatoshi": {},
                            "receivable_msatoshi": {},
                            "their_to_self_delay": {},
                            "our_to_self_delay": {},
                            "max_accepted_htlcs": {},
                            "msatoshi_to_us": {},
                            "msatoshi_to_us_min": {},
                            "msatoshi_to_us_max": {},
                            "msatoshi_total": {},
                            "dust_limit_satoshis": {},
                            "max_htlc_value_in_flight_msat": {},
                            "our_channel_reserve_satoshis": {},
                            "their_channel_reserve_satoshis": {},
                            "spendable_satoshis": {},
                            "receivable_satoshis": {},
                            "htlc_minimum_msat": {},
                            "state_changes": {},
                            "status": {},
                            "in_payments_offered": {},
                            "in_offered_msat": {},
                            "in_msatoshi_offered": {},
                            "in_payments_fulfilled": {},
                            "in_fulfilled_msat": {},
                            "in_msatoshi_fulfilled": {},
                            "out_payments_offered": {},
                            "out_offered_msat": {},
                            "out_msatoshi_offered": {},
                            "out_payments_fulfilled": {},
                            "out_fulfilled_msat": {},
                            "out_msatoshi_fulfilled": {},
                            "htlcs": {},
                            "initial_feerate": {},
                            "last_feerate": {},
                            "next_feerate": {},
                            "close_to_addr": {},
                            "last_tx_fee_msat": {},
                            "direction": {
                              "type": "u32",
                              "description": "0 if we're the lesser node_id, 1 if we're the greater"
                            }
                          }
                        }
                      },
                      {
                        "if": {
                          "required": [
                            "inflight"
                          ]
                        },
                        "then": {
                          "additionalProperties": false,
                          "required": [
                            "initial_feerate",
                            "last_feerate",
                            "next_feerate"
                          ],
                          "properties": {
                            "state": {},
                            "scratch_txid": {},
                            "feerate": {},
                            "owner": {},
                            "alias": {},
                            "short_channel_id": {},
                            "channel_id": {},
                            "funding_txid": {},
                            "funding_outnum": {},
                            "close_to": {},
                            "private": {},
                            "opener": {},
                            "closer": {},
                            "features": {},
                            "funding": {},
                            "to_us_msat": {},
                            "min_to_us_msat": {},
                            "max_to_us_msat": {},
                            "total_msat": {},
                            "fee_base_msat": {},
                            "fee_proportional_millionths": {},
                            "dust_limit_msat": {},
                            "max_total_htlc_in_msat": {},
                            "their_reserve_msat": {},
                            "our_reserve_msat": {},
                            "spendable_msat": {},
                            "receivable_msat": {},
                            "minimum_htlc_in_msat": {},
                            "minimum_htlc_out_msat": {},
                            "maximum_htlc_out_msat": {},
                            "spendable_msatoshi": {},
                            "receivable_msatoshi": {},
                            "their_to_self_delay": {},
                            "our_to_self_delay": {},
                            "max_accepted_htlcs": {},
                            "msatoshi_to_us": {},
                            "msatoshi_to_us_min": {},
                            "msatoshi_to_us_max": {},
                            "msatoshi_total": {},
                            "dust_limit_satoshis": {},
                            "max_htlc_value_in_flight_msat": {},
                            "our_channel_reserve_satoshis": {},
                            "their_channel_reserve_satoshis": {},
                            "spendable_satoshis": {},
                            "receivable_satoshis": {},
                            "htlc_minimum_msat": {},
                            "state_changes": {},
                            "status": {},
                            "in_payments_offered": {},
                            "in_offered_msat": {},
                            "in_msatoshi_offered": {},
                            "in_payments_fulfilled": {},
                            "in_fulfilled_msat": {},
                            "in_msatoshi_fulfilled": {},
                            "out_payments_offered": {},
                            "out_offered_msat": {},
                            "out_msatoshi_offered": {},
                            "out_payments_fulfilled": {},
                            "out_fulfilled_msat": {},
                            "out_msatoshi_fulfilled": {},
                            "htlcs": {},
                            "inflight": {},
                            "close_to_addr": {},
                            "direction": {},
                            "last_tx_fee_msat": {},
                            "initial_feerate": {
                              "type": "string",
                              "description": "The feerate for the initial funding transaction in per-1000-weight, with \"kpw\" appended"
                            },
                            "last_feerate": {
                              "type": "string",
                              "description": "The feerate for the latest funding transaction in per-1000-weight, with \"kpw\" appended"
                            },
                            "next_feerate": {
                              "type": "string",
                              "description": "The minimum feerate for the next funding transaction in per-1000-weight, with \"kpw\" appended"
                            }
                          }
                        }
                      }
                    ]
                  }
                }
              },
              "allOf": [
                {
                  "if": {
                    "additionalProperties": true,
                    "properties": {
                      "connected": {
                        "enum": [
                          true
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "netaddr",
                      "features"
                    ],
                    "properties": {
                      "id": {},
                      "channels": {},
                      "connected": {},
                      "htlcs": {},
                      "log": {},
                      "netaddr": {
                        "type": "array",
                        "minItems": 1,
                        "maxItems": 1,
                        "description": "A single entry array",
                        "items": {
                          "type": "string",
                          "description": "address, e.g. 1.2.3.4:1234"
                        }
                      },
                      "remote_addr": {
                        "type": "string",
                        "description": "The public IPv4/6 address the peer sees us from, e.g. 1.2.3.4:1234"
                      },
                      "features": {
                        "type": "hex",
                        "description": "bitmap of BOLT #9 features from peer's INIT message"
                      }
                    }
                  }
                }
              ]
            }
          }
        }
      }
    },
    "ListFunds": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "additionalProperties": false,
        "properties": {
          "spent": {
            "type": "boolean",
            "description": "Should outputs that are already spent be included in the result?"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "outputs",
          "channels"
        ],
        "properties": {
          "outputs": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true,
              "required": [
                "txid",
                "output",
                "amount_msat",
                "scriptpubkey",
                "status",
                "reserved"
              ],
              "properties": {
                "txid": {
                  "type": "txid",
                  "description": "the ID of the spendable transaction"
                },
                "output": {
                  "type": "u32",
                  "description": "the index within *txid*"
                },
                "amount_msat": {
                  "type": "msat",
                  "description": "the amount of the output"
                },
                "scriptpubkey": {
                  "type": "hex",
                  "description": "the scriptPubkey of the output"
                },
                "address": {
                  "type": "string",
                  "description": "the bitcoin address of the output"
                },
                "redeemscript": {
                  "type": "hex",
                  "description": "the redeemscript, only if it's p2sh-wrapped"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "unconfirmed",
                    "confirmed",
                    "spent",
                    "immature"
                  ]
                },
                "reserved": {
                  "type": "boolean",
                  "description": "whether this UTXO is currently reserved for an in-flight tx"
                }
              },
              "allOf": [
                {
                  "if": {
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "confirmed"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "blockheight"
                    ],
                    "properties": {
                      "txid": {},
                      "output": {},
                      "amount_msat": {},
                      "scriptpubkey": {},
                      "address": {},
                      "value": {},
                      "redeemscript": {},
                      "status": {},
                      "reserved": {},
                      "reserved_to_block": {},
                      "blockheight": {
                        "type": "u32",
                        "description": "Block height where it was confirmed"
                      }
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "reserved": {
                        "type": "boolean",
                        "enum": [
                          "true"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "reserved_to_block"
                    ],
                    "properties": {
                      "txid": {},
                      "output": {},
                      "amount_msat": {},
                      "scriptpubkey": {},
                      "address": {},
                      "value": {},
                      "redeemscript": {},
                      "status": {},
                      "blockheight": {},
                      "reserved": {},
                      "reserved_to_block": {
                        "type": "u32",
                        "description": "Block height where reservation will expire"
                      }
                    }
                  }
                }
              ]
            }
          },
          "channels": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true,
              "required": [
                "peer_id",
                "our_amount_msat",
                "amount_msat",
                "funding_txid",
                "funding_output",
                "connected",
                "state"
              ],
              "properties": {
                "peer_id": {
                  "type": "pubkey",
                  "description": "the peer with which the channel is opened"
                },
                "our_amount_msat": {
                  "type": "msat",
                  "description": "available satoshis on our node's end of the channel"
                },
                "channel_sat": {
                  "deprecated": true
                },
                "amount_msat": {
                  "type": "msat",
                  "description": "total channel value"
                },
                "channel_total_sat": {
                  "deprecated": true
                },
                "funding_txid": {
                  "type": "txid",
                  "description": "funding transaction id"
                },
                "funding_output": {
                  "type": "u32",
                  "description": "the 0-based index of the output in the funding transaction"
                },
                "connected": {
                  "type": "boolean",
                  "description": "whether the channel peer is connected"
                },
                "state": {
                  "type": "string",
                  "enum": [
                    "OPENINGD",
                    "CHANNELD_AWAITING_LOCKIN",
                    "CHANNELD_NORMAL",
                    "CHANNELD_SHUTTING_DOWN",
                    "CLOSINGD_SIGEXCHANGE",
                    "CLOSINGD_COMPLETE",
                    "AWAITING_UNILATERAL",
                    "FUNDING_SPEND_SEEN",
                    "ONCHAIN",
                    "DUALOPEND_OPEN_INIT",
                    "DUALOPEND_AWAITING_LOCKIN"
                  ],
                  "description": "the channel state, in particular \"CHANNELD_NORMAL\" means the channel can be used normally"
                }
              },
              "allOf": [
                {
                  "if": {
                    "properties": {
                      "state": {
                        "type": "string",
                        "enum": [
                          "CHANNELD_NORMAL"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "short_channel_id"
                    ],
                    "properties": {
                      "peer_id": {},
                      "our_amount_msat": {},
                      "channel_sat": {},
                      "amount_msat": {},
                      "channel_total_sat": {},
                      "funding_txid": {},
                      "funding_output": {},
                      "connected": {},
                      "state": {},
                      "short_channel_id": {
                        "type": "short_channel_id",
                        "description": "short channel id of channel"
                      }
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "state": {
                        "type": "string",
                        "enum": [
                          "CHANNELD_SHUTTING_DOWN",
                          "CLOSINGD_SIGEXCHANGE",
                          "CLOSINGD_COMPLETE",
                          "AWAITING_UNILATERAL",
                          "FUNDING_SPEND_SEEN",
                          "ONCHAIN"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [],
                    "properties": {
                      "peer_id": {},
                      "our_amount_msat": {},
                      "channel_sat": {},
                      "amount_msat": {},
                      "channel_total_sat": {},
                      "funding_txid": {},
                      "funding_output": {},
                      "connected": {},
                      "state": {},
                      "short_channel_id": {
                        "type": "short_channel_id",
                        "description": "short channel id of channel (only if funding reached lockin depth before closing)"
                      }
                    }
                  }
                }
              ]
            }
          }
        }
      }
    },
    "SendPay": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "route",
          "payment_hash"
        ],
        "properties": {
          "route": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "amount_msat",
                "id",
                "delay",
                "channel"
              ],
              "properties": {
                "amount_msat": {
                  "type": "msat"
                },
                "msatoshi": {
                  "deprecated": "true"
                },
                "id": {
                  "type": "pubkey"
                },
                "delay": {
                  "type": "u16"
                },
                "channel": {
                  "type": "short_channel_id"
                }
              }
            }
          },
          "payment_hash": {
            "type": "hash"
          },
          "label": {
            "type": "string"
          },
          "amount_msat": {
            "type": "msat"
          },
          "bolt11": {
            "type": "string"
          },
          "payment_secret": {
            "type": "secret"
          },
          "partid": {
            "type": "u16"
          },
          "localinvreqid": {
            "type": "hex"
          },
          "groupid": {
            "type": "u64"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": true,
        "required": [
          "id",
          "payment_hash",
          "status",
          "created_at",
          "amount_sent_msat"
        ],
        "properties": {
          "id": {
            "type": "u64",
            "description": "unique ID for this payment attempt"
          },
          "groupid": {
            "type": "u64",
            "description": "Grouping key to disambiguate multiple attempts to pay an invoice or the same payment_hash"
          },
          "payment_hash": {
            "type": "hash",
            "description": "the hash of the *payment_preimage* which will prove payment",
            "maxLength": 64,
            "minLength": 64
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "complete"
            ],
            "description": "status of the payment (could be complete if already sent previously)"
          },
          "msatoshi": {
            "deprecated": true
          },
          "amount_msat": {
            "type": "msat",
            "description": "The amount delivered to destination (if known)"
          },
          "destination": {
            "type": "pubkey",
            "description": "the final destination of the payment if known"
          },
          "created_at": {
            "type": "u64",
            "description": "the UNIX timestamp showing when this payment was initiated"
          },
          "completed_at": {
            "type": "u64",
            "description": "the UNIX timestamp showing when this payment was completed"
          },
          "msatoshi_sent": {
            "deprecated": true
          },
          "amount_sent_msat": {
            "type": "msat",
            "description": "The amount sent"
          },
          "label": {
            "type": "string",
            "description": "the *label*, if given to sendpay"
          },
          "partid": {
            "type": "u64",
            "description": "the *partid*, if given to sendpay"
          },
          "bolt11": {
            "type": "string",
            "description": "the bolt11 string (if supplied)"
          },
          "bolt12": {
            "type": "string",
            "description": "the bolt12 string (if supplied: **experimental-offers** only)."
          }
        },
        "allOf": [
          {
            "if": {
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "complete"
                  ]
                }
              }
            },
            "then": {
              "additionalProperties": false,
              "required": [
                "payment_preimage"
              ],
              "properties": {
                "id": {},
                "groupid": {},
                "payment_hash": {},
                "status": {},
                "msatoshi": {},
                "amount_msat": {},
                "destination": {},
                "created_at": {},
                "completed_at": {},
                "msatoshi_sent": {},
                "amount_sent_msat": {},
                "label": {},
                "partid": {},
                "bolt11": {},
                "bolt12": {},
                "payment_preimage": {
                  "type": "secret",
                  "description": "the proof of payment: SHA256 of this **payment_hash**",
                  "maxLength": 64,
                  "minLength": 64
                }
              }
            }
          },
          {
            "if": {
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "pending"
                  ]
                }
              }
            },
            "then": {
              "additionalProperties": false,
              "required": [
                "message"
              ],
              "properties": {
                "id": {},
                "groupid": {},
                "payment_hash": {},
                "status": {},
                "msatoshi": {},
                "amount_msat": {},
                "destination": {},
                "created_at": {},
                "completed_at": {},
                "msatoshi_sent": {},
                "amount_sent_msat": {},
                "label": {},
                "partid": {},
                "bolt11": {},
                "bolt12": {},
                "message": {
                  "type": "string",
                  "description": "Monitor status with listpays or waitsendpay"
                }
              }
            }
          }
        ]
      }
    },
    "ListChannels": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "additionalProperties": false,
        "properties": {
          "short_channel_id": {
            "type": "short_channel_id",
            "description": "If short_channel_id is a short channel id, then only known channels with a matching short_channel_id are returned. Otherwise, it must be null."
          },
          "source": {
            "type": "pubkey",
            "description": "If source is a node id, then only channels leading from that node id are returned."
          },
          "destination": {
            "type": "pubkey",
            "description": "If destination is a node id, then only channels leading to that node id are returned."
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "channels"
        ],
        "properties": {
          "channels": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "source",
                "destination",
                "short_channel_id",
                "public",
                "amount_msat",
                "message_flags",
                "channel_flags",
                "active",
                "last_update",
                "base_fee_millisatoshi",
                "fee_per_millionth",
                "delay",
                "htlc_minimum_msat",
                "features"
              ],
              "properties": {
                "source": {
                  "type": "pubkey",
                  "description": "the source node"
                },
                "destination": {
                  "type": "pubkey",
                  "description": "the destination node"
                },
                "short_channel_id": {
                  "type": "short_channel_id",
                  "description": "short channel id of channel"
                },
                "public": {
                  "type": "boolean",
                  "description": "true if this is announced (otherwise it must be our channel)"
                },
                "amount_msat": {
                  "type": "msat",
                  "description": "the total capacity of this channel (always a whole number of satoshis)"
                },
                "message_flags": {
                  "type": "u8",
                  "description": "as defined by BOLT #7"
                },
                "channel_flags": {
                  "type": "u8",
                  "description": "as defined by BOLT #7"
                },
                "active": {
                  "type": "boolean",
                  "description": "true unless source has disabled it, or it's a local channel and the peer is disconnected or it's still opening or closing"
                },
                "last_update": {
                  "type": "u32",
                  "description": "UNIX timestamp on the last channel_update from *source*"
                },
                "base_fee_millisatoshi": {
                  "type": "u32",
                  "description": "Base fee changed by *source* to use this channel"
                },
                "fee_per_millionth": {
                  "type": "u32",
                  "description": "Proportional fee changed by *source* to use this channel, in parts-per-million"
                },
                "delay": {
                  "type": "u32",
                  "description": "The number of blocks delay required by *source* to use this channel"
                },
                "htlc_minimum_msat": {
                  "type": "msat",
                  "description": "The smallest payment *source* will allow via this channel"
                },
                "satoshis": {
                  "deprecated": true
                },
                "htlc_maximum_msat": {
                  "type": "msat",
                  "description": "The largest payment *source* will allow via this channel"
                },
                "features": {
                  "type": "hex",
                  "description": "BOLT #9 features bitmap for this channel"
                }
              }
            }
          }
        }
      }
    },
    "AddGossip": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "type": "hex",
            "description": "The raw, hex-encoded, gossip message to add to the local gossip view."
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "properties": {}
      }
    },
    "AutoCleanInvoice": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [],
        "properties": {
          "expired_by": {
            "type": "u64",
            "description": "How long an invoice must be expired (seconds) before we delete it."
          },
          "cycle_seconds": {
            "type": "u64",
            "description": "The interval (in seconds) between cleaning expired invoices"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": true,
        "required": [
          "enabled"
        ],
        "properties": {
          "enabled": {
            "type": "boolean",
            "description": "whether invoice autocleaning is active"
          }
        },
        "if": {
          "properties": {
            "enabled": {
              "type": "boolean",
              "enum": [
                true
              ]
            }
          }
        },
        "then": {
          "additionalProperties": false,
          "required": [
            "expired_by",
            "cycle_seconds"
          ],
          "properties": {
            "enabled": {},
            "expired_by": {
              "type": "u64",
              "description": "how long an invoice must be expired (seconds) before we delete it"
            },
            "cycle_seconds": {
              "type": "u64",
              "description": "how long an invoice must be expired (seconds) before we delete it"
            }
          }
        },
        "else": {
          "additionalProperties": false,
          "properties": {
            "enabled": {}
          }
        }
      }
    },
    "CheckMessage": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "message",
          "zbase"
        ],
        "properties": {
          "message": {
            "type": "string",
            "description": "Message to be checked against the signature."
          },
          "zbase": {
            "type": "string",
            "description": "The Zbase32 encoded signature to verify."
          },
          "pubkey": {
            "type": "pubkey",
            "description": "The Zbase32 encoded signature to verify."
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
          "verified",
          "pubkey"
        ],
        "additionalProperties": false,
        "properties": {
          "verified": {
            "type": "boolean",
            "enum": [
              true
            ],
            "description": "whether the signature was valid"
          },
          "pubkey": {
            "type": "pubkey",
            "description": "the *pubkey* parameter, or the pubkey found by looking for known nodes"
          }
        }
      }
    },
    "Close": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "peer id, channel id or short_channel_id"
          },
          "unilateraltimeout": {
            "type": "u32",
            "description": ""
          },
          "destination": {
            "type": "string",
            "description": ""
          },
          "fee_negotiation_step": {
            "type": "string",
            "description": ""
          },
          "wrong_funding": {
            "type": "outpoint",
            "description": ""
          },
          "force_lease_closed": {
            "type": "boolean",
            "description": ""
          },
          "feerange": {
            "type": "array",
            "items": {
              "type": "feerate"
            },
            "description": ""
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
          "type"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "mutual",
              "unilateral",
              "unopened"
            ],
            "description": "Whether we successfully negotiated a mutual close, closed without them, or discarded not-yet-opened channel"
          }
        },
        "if": {
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "mutual",
                "unilateral"
              ]
            }
          }
        },
        "then": {
          "additionalProperties": false,
          "required": [
            "tx",
            "txid"
          ],
          "properties": {
            "type": {},
            "tx": {
              "type": "hex",
              "description": "the raw bitcoin transaction used to close the channel (if it was open)"
            },
            "txid": {
              "type": "txid",
              "description": "the transaction id of the *tx* field"
            }
          }
        },
        "else": {
          "additionalProperties": false,
          "properties": {
            "type": {}
          }
        }
      }
    },
    "Connect": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": ""
          },
          "host": {
            "type": "string",
            "description": "The hostname of the node."
          },
          "port": {
            "type": "u16",
            "description": "Port to try connecting to"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id",
          "features",
          "direction",
          "address"
        ],
        "properties": {
          "id": {
            "type": "pubkey",
            "description": "the peer we connected to"
          },
          "features": {
            "type": "hex",
            "description": "BOLT 9 features bitmap offered by peer"
          },
          "direction": {
            "type": "string",
            "enum": [
              "in",
              "out"
            ],
            "description": "Whether they initiated connection or we did"
          },
          "address": {
            "type": "object",
            "description": "Address information (mainly useful if **direction** is *out*)",
            "additionalProperties": true,
            "required": [
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "local socket",
                  "ipv4",
                  "ipv6",
                  "torv2",
                  "torv3"
                ],
                "description": "Type of connection (*torv2*/*torv3* only if **direction** is *out*)"
              }
            },
            "allOf": [
              {
                "if": {
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "local socket"
                      ]
                    }
                  }
                },
                "then": {
                  "additionalProperties": false,
                  "required": [
                    "socket"
                  ],
                  "properties": {
                    "type": {},
                    "socket": {
                      "type": "string",
                      "description": "socket filename"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "ipv4",
                        "ipv6",
                        "torv2",
                        "torv3"
                      ]
                    }
                  }
                },
                "then": {
                  "additionalProperties": false,
                  "required": [
                    "address",
                    "port"
                  ],
                  "properties": {
                    "type": {},
                    "address": {
                      "type": "string",
                      "description": "address in expected format for **type**"
                    },
                    "port": {
                      "type": "u16",
                      "description": "port number"
                    }
                  }
                }
              }
            ]
          }
        }
      }
    },
    "CreateInvoice": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "invstring",
          "label",
          "preimage"
        ],
        "properties": {
          "invstring": {
            "type": "string",
            "description": ""
          },
          "label": {
            "type": "string",
            "description": ""
          },
          "preimage": {
            "type": "hex",
            "description": ""
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "label",
          "payment_hash",
          "status",
          "description",
          "expires_at"
        ],
        "properties": {
          "label": {
            "type": "string",
            "description": "the label for the invoice"
          },
          "bolt11": {
            "type": "string",
            "description": "the bolt11 string (always present unless **bolt12** is)"
          },
          "bolt12": {
            "type": "string",
            "description": "the bolt12 string instead of **bolt11** (**experimental-offers** only)"
          },
          "payment_hash": {
            "type": "hash",
            "description": "the hash of the *payment_preimage* which will prove payment",
            "maxLength": 64,
            "minLength": 64
          },
          "amount_msat": {
            "type": "msat",
            "description": "The amount of the invoice (if it has one)"
          },
          "status": {
            "type": "string",
            "enum": [
              "paid",
              "expired",
              "unpaid"
            ],
            "description": "Whether it has been paid, or can no longer be paid"
          },
          "description": {
            "type": "string",
            "description": "Description extracted from **bolt11** or **bolt12**"
          },
          "expires_at": {
            "type": "u64",
            "description": "UNIX timestamp of when invoice expires (or expired)"
          },
          "pay_index": {
            "type": "u64",
            "description": "Incrementing id for when this was paid (**status** *paid* only)"
          },
          "amount_received_msat": {
            "type": "msat",
            "description": "Amount actually received (**status** *paid* only)"
          },
          "paid_at": {
            "type": "u64",
            "description": "UNIX timestamp of when invoice was paid (**status** *paid* only)"
          },
          "payment_preimage": {
            "type": "secret",
            "description": "the proof of payment: SHA256 of this **payment_hash**",
            "maxLength": 64,
            "minLength": 64
          },
          "local_offer_id": {
            "type": "hex",
            "description": "the *id* of our offer which created this invoice (**experimental-offers** only).",
            "maxLength": 64,
            "minLength": 64
          },
          "invreq_payer_note": {
            "type": "string",
            "description": "the optional *invreq_payer_note* from invoice_request which created this invoice (**experimental-offers** only)."
          }
        }
      }
    },
    "Datastore": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "key"
        ],
        "properties": {
          "key": {
            "oneOf": [
              {
                "type": "array",
                "description": "key is an array of values (though a single value is treated as a one-element array), to form a heirarchy. Using the first element of the key as the plugin name (e.g. [ 'summary' ]) is recommended. A key can either have children or a value, never both: parents are created and removed automatically.",
                "items": {
                  "type": "string"
                }
              },
              {
                "type": "string"
              }
            ]
          },
          "string": {
            "type": "string",
            "description": ""
          },
          "hex": {
            "type": "hex",
            "description": ""
          },
          "mode": {
            "type": "string",
            "enum": [
              "must-create",
              "must-replace",
              "create-or-replace",
              "must-append",
              "create-or-append"
            ],
            "description": ""
          },
          "generation": {
            "type": "u64",
            "description": "If specified, means that the update will fail if the previously-existing data is not exactly that generation. This allows for simple atomicity. This is only legal with mode \u201cmust-replace\u201d or \u201cmust-append\u201d."
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "key"
        ],
        "properties": {
          "key": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "Part of the key added to the datastore"
            }
          },
          "generation": {
            "type": "u64",
            "description": "The number of times this has been updated"
          },
          "hex": {
            "type": "hex",
            "description": "The hex data which has been added to the datastore"
          },
          "string": {
            "type": "string",
            "description": "The data as a string, if it's valid utf-8"
          }
        }
      }
    },
    "CreateOnion": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "hops",
          "assocdata"
        ],
        "properties": {
          "hops": {
            "type": "array",
            "description": "",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "pubkey",
                "payload"
              ],
              "properties": {
                "pubkey": {
                  "type": "pubkey"
                },
                "payload": {
                  "type": "hex"
                }
              }
            }
          },
          "assocdata": {
            "type": "hex",
            "description": ""
          },
          "session_key": {
            "type": "secret"
          },
          "onion_size": {
            "type": "u16"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "onion",
          "shared_secrets"
        ],
        "properties": {
          "onion": {
            "type": "hex",
            "description": "the onion packet (*onion_size* bytes)"
          },
          "shared_secrets": {
            "type": "array",
            "description": "one shared secret for each node in the *hops* parameter",
            "items": {
              "type": "secret",
              "description": "the shared secret with this hop",
              "maxLength": 64,
              "minLength": 64
            }
          }
        }
      }
    },
    "DelDatastore": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "key"
        ],
        "properties": {
          "key": {
            "oneOf": [
              {
                "type": "array",
                "description": "key is an array of values (though a single value is treated as a one-element array), to form a heirarchy. Using the first element of the key as the plugin name (e.g. [ 'summary' ]) is recommended. A key can either have children or a value, never both: parents are created and removed automatically.",
                "items": {
                  "type": "string"
                }
              },
              {
                "type": "string"
              }
            ]
          },
          "generation": {
            "type": "u64",
            "description": "If specified, means that the update will fail if the previously-existing data is not exactly that generation. This allows for simple atomicity. This is only legal with mode \u201cmust-replace\u201d or \u201cmust-append\u201d."
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "key"
        ],
        "properties": {
          "key": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "Part of the key added to the datastore"
            }
          },
          "generation": {
            "type": "u64",
            "description": "The number of times this has been updated"
          },
          "hex": {
            "type": "hex",
            "description": "The hex data which has removed from the datastore"
          },
          "string": {
            "type": "string",
            "description": "The data as a string, if it's valid utf-8"
          }
        }
      }
    },
    "DelExpiredInvoice": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [],
        "properties": {
          "maxexpirytime": {
            "type": "u64",
            "description": ""
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "additionalProperties": false,
        "properties": {}
      }
    },
    "DelInvoice": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "label",
          "status"
        ],
        "properties": {
          "label": {
            "oneOf": [
              {
                "type": "string",
                "description": ""
              },
              {
                "type": "integer",
                "description": ""
              }
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "paid",
              "expired",
              "unpaid"
            ]
          },
          "desconly": {
            "type": "boolean"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
          "label",
          "payment_hash",
          "status",
          "expires_at"
        ],
        "additionalProperties": true,
        "properties": {
          "label": {
            "type": "string",
            "description": "Unique label given at creation time"
          },
          "bolt11": {
            "type": "string",
            "description": "BOLT11 string"
          },
          "bolt12": {
            "type": "string",
            "description": "BOLT12 string"
          },
          "msatoshi": {
            "deprecated": "true"
          },
          "amount_msat": {
            "type": "msat",
            "description": "the amount required to pay this invoice"
          },
          "description": {
            "type": "string",
            "description": "description used in the invoice"
          },
          "payment_hash": {
            "type": "hash",
            "description": "the hash of the *payment_preimage* which will prove payment",
            "maxLength": 64,
            "minLength": 64
          },
          "status": {
            "type": "string",
            "description": "State of invoice",
            "enum": [
              "paid",
              "expired",
              "unpaid"
            ]
          },
          "expires_at": {
            "type": "u64",
            "description": "UNIX timestamp when invoice expires (or expired)"
          }
        },
        "allOf": [
          {
            "if": {
              "required": [
                "bolt12"
              ]
            },
            "then": {
              "required": [],
              "additionalProperties": false,
              "properties": {
                "label": {},
                "bolt12": {},
                "status": {},
                "expires_at": {},
                "msatoshi": {},
                "amount_msat": {},
                "description": {},
                "payment_hash": {},
                "pay_index": {},
                "amount_received_msat": {},
                "paid_at": {},
                "payment_preimage": {},
                "local_offer_id": {
                  "type": "hex",
                  "description": "offer for which this invoice was created"
                },
                "invreq_payer_note": {
                  "type": "string",
                  "description": "the optional *invreq_payer_note* from invoice_request which created this invoice"
                }
              }
            },
            "else": {
              "required": [
                "bolt11"
              ],
              "additionalProperties": false,
              "properties": {
                "label": {},
                "bolt11": {},
                "status": {},
                "expires_at": {},
                "msatoshi": {},
                "amount_msat": {},
                "description": {},
                "payment_hash": {},
                "pay_index": {},
                "amount_received_msat": {},
                "msatoshi_received": {},
                "paid_at": {},
                "payment_preimage": {}
              }
            }
          },
          {
            "if": {
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "paid"
                  ]
                }
              }
            },
            "then": {
              "additionalProperties": false,
              "required": [
                "pay_index",
                "amount_received_msat",
                "paid_at",
                "payment_preimage"
              ],
              "properties": {
                "label": {},
                "bolt11": {},
                "bolt12": {},
                "status": {},
                "expires_at": {},
                "msatoshi": {},
                "amount_msat": {},
                "description": {},
                "payment_hash": {},
                "invreq_payer_note": {},
                "local_offer_id": {},
                "pay_index": {
                  "type": "u64",
                  "description": "unique index for this invoice payment"
                },
                "amount_received_msat": {
                  "type": "msat",
                  "description": "how much was actually received"
                },
                "msatoshi_received": {
                  "deprecated": "true"
                },
                "paid_at": {
                  "type": "u64",
                  "description": "UNIX timestamp of when payment was received"
                },
                "payment_preimage": {
                  "type": "secret",
                  "description": "SHA256 of this is the *payment_hash* offered in the invoice",
                  "maxLength": 64,
                  "minLength": 64
                }
              }
            },
            "else": {
              "additionalProperties": false,
              "properties": {
                "label": {},
                "bolt11": {},
                "bolt12": {},
                "status": {},
                "msatoshi": {},
                "amount_msat": {},
                "description": {},
                "payment_hash": {},
                "expires_at": {},
                "pay_index": {},
                "invreq_payer_note": {},
                "local_offer_id": {}
              }
            }
          }
        ]
      }
    },
    "Invoice": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "amount_msat",
          "label",
          "description"
        ],
        "properties": {
          "amount_msat": {
            "type": "msat_or_any",
            "description": ""
          },
          "description": {
            "type": "string",
            "description": ""
          },
          "label": {
            "oneOf": [
              {
                "type": "string",
                "description": ""
              },
              {
                "type": "integer",
                "description": ""
              }
            ]
          },
          "expiry": {
            "type": "u64",
            "description": ""
          },
          "fallbacks": {
            "type": "array",
            "description": "",
            "items": {
              "type": "string"
            }
          },
          "preimage": {
            "type": "hex",
            "description": ""
          },
          "exposeprivatechannels": {
            "oneOf": [
              {
                "type": "boolean",
                "description": ""
              },
              {
                "type": "array",
                "items": {
                  "type": "short_channel_id"
                }
              },
              {
                "type": "short_channel_id"
              }
            ]
          },
          "cltv": {
            "type": "u32",
            "description": ""
          },
          "deschashonly": {
            "type": "boolean",
            "description": ""
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "payment_hash",
          "expires_at",
          "bolt11",
          "payment_secret"
        ],
        "properties": {
          "bolt11": {
            "type": "string",
            "description": "the bolt11 string"
          },
          "payment_hash": {
            "type": "hash",
            "description": "the hash of the *payment_preimage* which will prove payment",
            "maxLength": 64,
            "minLength": 64
          },
          "payment_secret": {
            "type": "secret",
            "description": "the *payment_secret* to place in the onion",
            "maxLength": 64,
            "minLength": 64
          },
          "expires_at": {
            "type": "u64",
            "description": "UNIX timestamp of when invoice expires"
          },
          "warning_capacity": {
            "type": "string",
            "description": "even using all possible channels, there's not enough incoming capacity to pay this invoice."
          },
          "warning_offline": {
            "type": "string",
            "description": "there would be enough incoming capacity, but some channels are offline, so there isn't."
          },
          "warning_deadends": {
            "type": "string",
            "description": "there would be enough incoming capacity, but some channels are dead-ends (no other public channels from those peers), so there isn't."
          },
          "warning_private_unused": {
            "type": "string",
            "description": "there would be enough incoming capacity, but some channels are unannounced and *exposeprivatechannels* is *false*, so there isn't."
          },
          "warning_mpp": {
            "type": "string",
            "description": "there is sufficient capacity, but not in a single channel, so the payer will have to use multi-part payments."
          }
        }
      }
    },
    "ListDatastore": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [],
        "properties": {
          "key": {
            "oneOf": [
              {
                "type": "array",
                "description": "key is an array of values (though a single value is treated as a one-element array), to form a heirarchy. Using the first element of the key as the plugin name (e.g. [ 'summary' ]) is recommended. A key can either have children or a value, never both: parents are created and removed automatically.",
                "items": {
                  "type": "string"
                }
              },
              {
                "type": "string",
                "description": ""
              }
            ]
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "datastore"
        ],
        "properties": {
          "datastore": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "key"
              ],
              "properties": {
                "key": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "description": "Part of the key added to the datastore"
                  }
                },
                "generation": {
                  "type": "u64",
                  "description": "The number of times this has been updated"
                },
                "hex": {
                  "type": "hex",
                  "description": "The hex data from the datastore"
                },
                "string": {
                  "type": "string",
                  "description": "The data as a string, if it's valid utf-8"
                }
              }
            }
          }
        }
      }
    },
    "ListInvoices": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [],
        "properties": {
          "label": {
            "oneOf": [
              {
                "type": "string",
                "description": ""
              },
              {
                "type": "integer",
                "description": ""
              }
            ]
          },
          "invstring": {
            "type": "string",
            "description": ""
          },
          "payment_hash": {
            "type": "hex",
            "description": ""
          },
          "offer_id": {
            "type": "string",
            "description": ""
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "invoices"
        ],
        "properties": {
          "invoices": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true,
              "required": [
                "label",
                "payment_hash",
                "status",
                "expires_at"
              ],
              "properties": {
                "label": {
                  "type": "string",
                  "description": "unique label supplied at invoice creation"
                },
                "description": {
                  "type": "string",
                  "description": "description used in the invoice"
                },
                "payment_hash": {
                  "type": "hash",
                  "description": "the hash of the *payment_preimage* which will prove payment",
                  "maxLength": 64,
                  "minLength": 64
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "unpaid",
                    "paid",
                    "expired"
                  ],
                  "description": "Whether it's paid, unpaid or unpayable"
                },
                "expires_at": {
                  "type": "u64",
                  "description": "UNIX timestamp of when it will become / became unpayable"
                },
                "msatoshi": {
                  "deprecated": "true"
                },
                "amount_msat": {
                  "type": "msat",
                  "description": "the amount required to pay this invoice"
                },
                "bolt11": {
                  "type": "string",
                  "description": "the BOLT11 string (always present unless *bolt12* is)"
                },
                "bolt12": {
                  "type": "string",
                  "description": "the BOLT12 string (always present unless *bolt11* is)"
                },
                "local_offer_id": {
                  "type": "hex",
                  "description": "the *id* of our offer which created this invoice (**experimental-offers** only).",
                  "maxLength": 64,
                  "minLength": 64
                },
                "invreq_payer_note": {
                  "type": "string",
                  "description": "the optional *invreq_payer_note* from invoice_request which created this invoice (**experimental-offers** only)."
                }
              },
              "allOf": [
                {
                  "if": {
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "paid"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "pay_index",
                      "amount_received_msat",
                      "paid_at",
                      "payment_preimage"
                    ],
                    "properties": {
                      "label": {},
                      "description": {},
                      "payment_hash": {},
                      "status": {},
                      "msatoshi": {},
                      "amount_msat": {},
                      "bolt11": {},
                      "bolt12": {},
                      "local_offer_id": {},
                      "invreq_payer_note": {},
                      "expires_at": {},
                      "pay_index": {
                        "type": "u64",
                        "description": "Unique incrementing index for this payment"
                      },
                      "msatoshi_received": {
                        "deprecated": true
                      },
                      "amount_received_msat": {
                        "type": "msat",
                        "description": "the amount actually received (could be slightly greater than *amount_msat*, since clients may overpay)"
                      },
                      "paid_at": {
                        "type": "u64",
                        "description": "UNIX timestamp of when it was paid"
                      },
                      "payment_preimage": {
                        "type": "secret",
                        "description": "proof of payment",
                        "maxLength": 64,
                        "minLength": 64
                      }
                    }
                  },
                  "else": {
                    "additionalProperties": false,
                    "properties": {
                      "label": {},
                      "description": {},
                      "payment_hash": {},
                      "status": {},
                      "msatoshi": {},
                      "amount_msat": {},
                      "bolt11": {},
                      "bolt12": {},
                      "local_offer_id": {},
                      "invreq_payer_note": {},
                      "expires_at": {}
                    }
                  }
                }
              ]
            }
          }
        }
      }
    },
    "SendOnion": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "onion",
          "first_hop",
          "payment_hash"
        ],
        "properties": {
          "onion": {
            "type": "hex"
          },
          "first_hop": {
            "type": "object",
            "required": [
              "id",
              "amount_msat",
              "delay"
            ],
            "properties": {
              "id": {
                "type": "pubkey"
              },
              "amount_msat": {
                "type": "msat"
              },
              "delay": {
                "type": "u16"
              }
            }
          },
          "payment_hash": {
            "type": "hash"
          },
          "label": {
            "type": "string"
          },
          "shared_secrets": {
            "type": "array",
            "items": {
              "type": "secret"
            }
          },
          "partid": {
            "type": "u16"
          },
          "bolt11": {
            "type": "string"
          },
          "amount_msat": {
            "type": "msat"
          },
          "destination": {
            "type": "pubkey"
          },
          "localinvreqid": {
            "type": "hash"
          },
          "groupid": {
            "type": "u64"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": true,
        "required": [
          "id",
          "payment_hash",
          "status",
          "created_at",
          "amount_sent_msat"
        ],
        "properties": {
          "id": {
            "type": "u64",
            "description": "unique ID for this payment attempt"
          },
          "payment_hash": {
            "type": "hash",
            "description": "the hash of the *payment_preimage* which will prove payment",
            "maxLength": 64,
            "minLength": 64
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "complete"
            ],
            "description": "status of the payment (could be complete if already sent previously)"
          },
          "msatoshi": {
            "deprecated": true
          },
          "amount_msat": {
            "type": "msat",
            "description": "The amount delivered to destination (if known)"
          },
          "destination": {
            "type": "pubkey",
            "description": "the final destination of the payment if known"
          },
          "created_at": {
            "type": "u64",
            "description": "the UNIX timestamp showing when this payment was initiated"
          },
          "msatoshi_sent": {
            "deprecated": true
          },
          "amount_sent_msat": {
            "type": "msat",
            "description": "The amount sent"
          },
          "label": {
            "type": "string",
            "description": "the label, if given to sendpay"
          },
          "bolt11": {
            "type": "string",
            "description": "the bolt11 string (if supplied)"
          },
          "bolt12": {
            "type": "string",
            "description": "the bolt12 string (if supplied: **experimental-offers** only)."
          },
          "partid": {
            "type": "u64",
            "description": "the partid (if supplied) to sendonion/sendpay"
          }
        },
        "allOf": [
          {
            "if": {
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "complete"
                  ]
                }
              }
            },
            "then": {
              "additionalProperties": false,
              "required": [
                "payment_preimage"
              ],
              "properties": {
                "id": {},
                "payment_hash": {},
                "status": {},
                "msatoshi": {},
                "amount_msat": {},
                "destination": {},
                "created_at": {},
                "groupid": {},
                "msatoshi_sent": {},
                "amount_sent_msat": {},
                "label": {},
                "bolt11": {},
                "bolt12": {},
                "partid": {},
                "payment_preimage": {
                  "type": "secret",
                  "description": "the proof of payment: SHA256 of this **payment_hash**",
                  "maxLength": 64,
                  "minLength": 64
                }
              }
            }
          },
          {
            "if": {
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "pending"
                  ]
                }
              }
            },
            "then": {
              "additionalProperties": false,
              "required": [],
              "properties": {
                "id": {},
                "payment_hash": {},
                "status": {},
                "msatoshi": {},
                "amount_msat": {},
                "destination": {},
                "created_at": {},
                "groupid": {},
                "msatoshi_sent": {},
                "amount_sent_msat": {},
                "label": {},
                "bolt11": {},
                "bolt12": {},
                "partid": {},
                "message": {
                  "type": "string",
                  "description": "Monitor status with listpays or waitsendpay"
                }
              }
            }
          }
        ]
      }
    },
    "ListSendPays": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "additionalProperties": false,
        "properties": {
          "bolt11": {
            "type": "string"
          },
          "payment_hash": {
            "type": "hash"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "complete",
              "failed"
            ]
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "payments"
        ],
        "properties": {
          "payments": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true,
              "required": [
                "id",
                "payment_hash",
                "status",
                "groupid",
                "created_at",
                "amount_sent_msat"
              ],
              "properties": {
                "id": {
                  "type": "u64",
                  "description": "unique ID for this payment attempt"
                },
                "groupid": {
                  "type": "u64",
                  "description": "Grouping key to disambiguate multiple attempts to pay an invoice or the same payment_hash"
                },
                "payment_hash": {
                  "type": "hash",
                  "description": "the hash of the *payment_preimage* which will prove payment",
                  "maxLength": 64,
                  "minLength": 64
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "pending",
                    "failed",
                    "complete"
                  ],
                  "description": "status of the payment"
                },
                "msatoshi": {
                  "deprecated": true
                },
                "amount_msat": {
                  "type": "msat",
                  "description": "The amount delivered to destination (if known)"
                },
                "destination": {
                  "type": "pubkey",
                  "description": "the final destination of the payment if known"
                },
                "created_at": {
                  "type": "u64",
                  "description": "the UNIX timestamp showing when this payment was initiated"
                },
                "msatoshi_sent": {
                  "deprecated": true
                },
                "amount_sent_msat": {
                  "type": "msat",
                  "description": "The amount sent"
                },
                "label": {
                  "type": "string",
                  "description": "the label, if given to sendpay"
                },
                "bolt11": {
                  "type": "string",
                  "description": "the bolt11 string (if pay supplied one)"
                },
                "description": {
                  "type": "string",
                  "description": "the description matching the bolt11 description hash (if pay supplied one)"
                },
                "bolt12": {
                  "type": "string",
                  "description": "the bolt12 string (if supplied for pay: **experimental-offers** only)."
                }
              },
              "allOf": [
                {
                  "if": {
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "complete"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "payment_preimage"
                    ],
                    "properties": {
                      "id": {},
                      "partid": {},
                      "groupid": {},
                      "payment_hash": {},
                      "status": {},
                      "msatoshi": {},
                      "amount_msat": {},
                      "destination": {},
                      "created_at": {},
                      "completed_at": {},
                      "msatoshi_sent": {},
                      "amount_sent_msat": {},
                      "label": {},
                      "bolt11": {},
                      "description": {},
                      "bolt12": {},
                      "payment_preimage": {
                        "type": "secret",
                        "description": "the proof of payment: SHA256 of this **payment_hash**",
                        "maxLength": 64,
                        "minLength": 64
                      }
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "failed"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [],
                    "properties": {
                      "id": {},
                      "partid": {},
                      "groupid": {},
                      "payment_hash": {},
                      "status": {},
                      "msatoshi": {},
                      "amount_msat": {},
                      "destination": {},
                      "created_at": {},
                      "completed_at": {},
                      "msatoshi_sent": {},
                      "amount_sent_msat": {},
                      "label": {},
                      "bolt11": {},
                      "description": {},
                      "bolt12": {},
                      "erroronion": {
                        "type": "hex",
                        "description": "the onion message returned"
                      }
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "pending"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [],
                    "properties": {
                      "id": {},
                      "partid": {},
                      "groupid": {},
                      "payment_hash": {},
                      "status": {},
                      "msatoshi": {},
                      "amount_msat": {},
                      "destination": {},
                      "created_at": {},
                      "msatoshi_sent": {},
                      "amount_sent_msat": {},
                      "label": {},
                      "bolt11": {},
                      "description": {},
                      "bolt12": {}
                    }
                  }
                }
              ]
            }
          }
        }
      }
    },
    "ListTransactions": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "additionalProperties": false,
        "properties": {}
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "transactions"
        ],
        "properties": {
          "transactions": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "hash",
                "rawtx",
                "blockheight",
                "txindex",
                "locktime",
                "version",
                "inputs",
                "outputs"
              ],
              "properties": {
                "hash": {
                  "type": "txid",
                  "description": "the transaction id"
                },
                "rawtx": {
                  "type": "hex",
                  "description": "the raw transaction"
                },
                "blockheight": {
                  "type": "u32",
                  "description": "the block height of this tx"
                },
                "txindex": {
                  "type": "u32",
                  "description": "the transaction number within the block"
                },
                "type": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "enum": [
                      "theirs",
                      "deposit",
                      "withdraw",
                      "channel_funding",
                      "channel_mutual_close",
                      "channel_unilateral_close",
                      "channel_sweep",
                      "channel_htlc_success",
                      "channel_htlc_timeout",
                      "channel_penalty",
                      "channel_unilateral_cheat"
                    ],
                    "description": "Reason we care about this transaction (*EXPERIMENTAL_FEATURES* only)"
                  }
                },
                "channel": {
                  "type": "short_channel_id",
                  "description": "the channel this transaction is associated with (*EXPERIMENTAL_FEATURES* only)"
                },
                "locktime": {
                  "type": "u32",
                  "description": "The nLocktime for this tx"
                },
                "version": {
                  "type": "u32",
                  "description": "The nVersion for this tx"
                },
                "inputs": {
                  "type": "array",
                  "description": "Each input, in order",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "txid",
                      "index",
                      "sequence"
                    ],
                    "properties": {
                      "txid": {
                        "type": "txid",
                        "description": "the transaction id spent"
                      },
                      "index": {
                        "type": "u32",
                        "description": "the output spent"
                      },
                      "sequence": {
                        "type": "u32",
                        "description": "the nSequence value"
                      },
                      "type": {
                        "type": "string",
                        "enum": [
                          "theirs",
                          "deposit",
                          "withdraw",
                          "channel_funding",
                          "channel_mutual_close",
                          "channel_unilateral_close",
                          "channel_sweep",
                          "channel_htlc_success",
                          "channel_htlc_timeout",
                          "channel_penalty",
                          "channel_unilateral_cheat"
                        ],
                        "description": "the purpose of this input (*EXPERIMENTAL_FEATURES* only)"
                      },
                      "channel": {
                        "type": "short_channel_id",
                        "description": "the channel this input is associated with (*EXPERIMENTAL_FEATURES* only)"
                      }
                    }
                  }
                },
                "outputs": {
                  "type": "array",
                  "description": "Each output, in order",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "index",
                      "amount_msat",
                      "scriptPubKey"
                    ],
                    "properties": {
                      "index": {
                        "type": "u32",
                        "description": "the 0-based output number"
                      },
                      "amount_msat": {
                        "type": "msat",
                        "description": "the amount of the output"
                      },
                      "msat": {
                        "deprecated": true
                      },
                      "scriptPubKey": {
                        "type": "hex",
                        "description": "the scriptPubKey"
                      },
                      "type": {
                        "type": "string",
                        "enum": [
                          "theirs",
                          "deposit",
                          "withdraw",
                          "channel_funding",
                          "channel_mutual_close",
                          "channel_unilateral_close",
                          "channel_sweep",
                          "channel_htlc_success",
                          "channel_htlc_timeout",
                          "channel_penalty",
                          "channel_unilateral_cheat"
                        ],
                        "description": "the purpose of this output (*EXPERIMENTAL_FEATURES* only)"
                      },
                      "channel": {
                        "type": "short_channel_id",
                        "description": "the channel this output is associated with (*EXPERIMENTAL_FEATURES* only)"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "Pay": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "bolt11"
        ],
        "properties": {
          "bolt11": {
            "type": "string"
          },
          "amount_msat": {
            "type": "msat"
          },
          "label": {
            "type": "string"
          },
          "riskfactor": {
            "type": "number"
          },
          "maxfeepercent": {
            "type": "number"
          },
          "retry_for": {
            "type": "u16"
          },
          "maxdelay": {
            "type": "u16"
          },
          "exemptfee": {
            "type": "msat"
          },
          "localinvreqid": {
            "type": "hex"
          },
          "exclude": {
            "type": "array",
            "items": {
              "oneOf": [
                {
                  "type": "short_channel_id_dir"
                },
                {
                  "type": "pubkey"
                }
              ]
            }
          },
          "maxfee": {
            "type": "msat"
          },
          "description": {
            "type": "string"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "payment_preimage",
          "payment_hash",
          "created_at",
          "parts",
          "amount_msat",
          "amount_sent_msat",
          "status"
        ],
        "properties": {
          "payment_preimage": {
            "type": "secret",
            "description": "the proof of payment: SHA256 of this **payment_hash**",
            "maxLength": 64,
            "minLength": 64
          },
          "destination": {
            "type": "pubkey",
            "description": "the final destination of the payment"
          },
          "payment_hash": {
            "type": "hash",
            "description": "the hash of the *payment_preimage* which will prove payment",
            "maxLength": 64,
            "minLength": 64
          },
          "created_at": {
            "type": "number",
            "description": "the UNIX timestamp showing when this payment was initiated"
          },
          "parts": {
            "type": "u32",
            "description": "how many attempts this took"
          },
          "msatoshi": {
            "deprecated": true
          },
          "amount_msat": {
            "type": "msat",
            "description": "Amount the recipient received"
          },
          "msatoshi_sent": {
            "deprecated": true
          },
          "amount_sent_msat": {
            "type": "msat",
            "description": "Total amount we sent (including fees)"
          },
          "warning_partial_completion": {
            "type": "string",
            "description": "Not all parts of a multi-part payment have completed"
          },
          "status": {
            "type": "string",
            "enum": [
              "complete",
              "pending",
              "failed"
            ],
            "description": "status of payment"
          }
        }
      }
    },
    "ListNodes": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "pubkey"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "nodes"
        ],
        "properties": {
          "nodes": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true,
              "required": [
                "nodeid"
              ],
              "properties": {
                "nodeid": {
                  "type": "pubkey",
                  "description": "the public key of the node"
                },
                "last_timestamp": {
                  "type": "u32",
                  "description": "A node_announcement has been received for this node (UNIX timestamp)"
                }
              },
              "allOf": [
                {
                  "if": {
                    "required": [
                      "last_timestamp"
                    ]
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "nodeid",
                      "last_timestamp",
                      "alias",
                      "color",
                      "features",
                      "addresses"
                    ],
                    "properties": {
                      "nodeid": {},
                      "last_timestamp": {},
                      "option_will_fund": {},
                      "alias": {
                        "type": "string",
                        "description": "The fun alias this node advertized",
                        "maxLength": 32
                      },
                      "color": {
                        "type": "hex",
                        "description": "The favorite RGB color this node advertized",
                        "minLength": 6,
                        "maxLength": 6
                      },
                      "features": {
                        "type": "hex",
                        "description": "BOLT #9 features bitmap this node advertized"
                      },
                      "addresses": {
                        "type": "array",
                        "description": "The addresses this node advertized",
                        "items": {
                          "type": "object",
                          "required": [
                            "type",
                            "port"
                          ],
                          "additionalProperties": true,
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": [
                                "dns",
                                "ipv4",
                                "ipv6",
                                "torv2",
                                "torv3",
                                "websocket"
                              ],
                              "description": "Type of connection"
                            },
                            "port": {
                              "type": "u16",
                              "description": "port number"
                            }
                          },
                          "if": {
                            "properties": {
                              "type": {
                                "type": "string",
                                "enum": [
                                  "dns",
                                  "ipv4",
                                  "ipv6",
                                  "torv2",
                                  "torv3"
                                ]
                              }
                            }
                          },
                          "then": {
                            "required": [
                              "type",
                              "address",
                              "port"
                            ],
                            "additionalProperties": false,
                            "properties": {
                              "type": {},
                              "port": {},
                              "address": {
                                "type": "string",
                                "description": "address in expected format for **type**"
                              }
                            }
                          },
                          "else": {
                            "required": [
                              "type",
                              "port"
                            ],
                            "additionalProperties": false,
                            "properties": {
                              "type": {},
                              "port": {}
                            }
                          }
                        }
                      }
                    }
                  },
                  "else": {
                    "additionalProperties": false,
                    "properties": {
                      "nodeid": {}
                    }
                  }
                },
                {
                  "if": {
                    "required": [
                      "option_will_fund"
                    ]
                  },
                  "then": {
                    "additionalProperties": true,
                    "required": [
                      "option_will_fund"
                    ],
                    "properties": {
                      "option_will_fund": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": [
                          "lease_fee_base_msat",
                          "lease_fee_basis",
                          "funding_weight",
                          "channel_fee_max_base_msat",
                          "channel_fee_max_proportional_thousandths",
                          "compact_lease"
                        ],
                        "properties": {
                          "lease_fee_base_msat": {
                            "type": "msat",
                            "description": "the fixed fee for a lease (whole number of satoshis)"
                          },
                          "lease_fee_basis": {
                            "type": "u32",
                            "description": "the proportional fee in basis points (parts per 10,000) for a lease"
                          },
                          "funding_weight": {
                            "type": "u32",
                            "description": "the onchain weight you'll have to pay for a lease"
                          },
                          "channel_fee_max_base_msat": {
                            "type": "msat",
                            "description": "the maximum base routing fee this node will charge during the lease"
                          },
                          "channel_fee_max_proportional_thousandths": {
                            "type": "u32",
                            "description": "the maximum proportional routing fee this node will charge during the lease (in thousandths, not millionths like channel_update)"
                          },
                          "compact_lease": {
                            "type": "hex",
                            "description": "the lease as represented in the node_announcement"
                          }
                        }
                      }
                    }
                  }
                }
              ]
            }
          }
        }
      }
    },
    "WaitAnyInvoice": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [],
        "properties": {
          "lastpay_index": {
            "type": "u64"
          },
          "timeout": {
            "type": "u64"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": true,
        "required": [
          "label",
          "description",
          "payment_hash",
          "status",
          "expires_at"
        ],
        "properties": {
          "label": {
            "type": "string",
            "description": "unique label supplied at invoice creation"
          },
          "description": {
            "type": "string",
            "description": "description used in the invoice"
          },
          "payment_hash": {
            "type": "hash",
            "description": "the hash of the *payment_preimage* which will prove payment",
            "maxLength": 64,
            "minLength": 64
          },
          "status": {
            "type": "string",
            "enum": [
              "paid",
              "expired"
            ],
            "description": "Whether it's paid or expired"
          },
          "expires_at": {
            "type": "u64",
            "description": "UNIX timestamp of when it will become / became unpayable"
          },
          "msatoshi": {
            "deprecated": "true"
          },
          "amount_msat": {
            "type": "msat",
            "description": "the amount required to pay this invoice"
          },
          "bolt11": {
            "type": "string",
            "description": "the BOLT11 string (always present unless *bolt12* is)"
          },
          "bolt12": {
            "type": "string",
            "description": "the BOLT12 string (always present unless *bolt11* is)"
          }
        },
        "allOf": [
          {
            "if": {
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "paid"
                  ]
                }
              }
            },
            "then": {
              "additionalProperties": false,
              "required": [
                "pay_index",
                "amount_received_msat",
                "paid_at",
                "payment_preimage"
              ],
              "properties": {
                "label": {},
                "description": {},
                "payment_hash": {},
                "status": {},
                "msatoshi": {},
                "amount_msat": {},
                "bolt11": {},
                "bolt12": {},
                "expires_at": {},
                "pay_index": {
                  "type": "u64",
                  "description": "Unique incrementing index for this payment"
                },
                "msatoshi_received": {
                  "deprecated": true
                },
                "amount_received_msat": {
                  "type": "msat",
                  "description": "the amount actually received (could be slightly greater than *amount_msat*, since clients may overpay)"
                },
                "paid_at": {
                  "type": "u64",
                  "description": "UNIX timestamp of when it was paid"
                },
                "payment_preimage": {
                  "type": "secret",
                  "description": "proof of payment",
                  "maxLength": 64,
                  "minLength": 64
                }
              }
            },
            "else": {
              "additionalProperties": false,
              "properties": {
                "label": {},
                "description": {},
                "payment_hash": {},
                "status": {},
                "msatoshi": {},
                "amount_msat": {},
                "bolt11": {},
                "bolt12": {},
                "expires_at": {}
              }
            }
          }
        ]
      }
    },
    "WaitInvoice": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "label"
        ],
        "properties": {
          "label": {
            "type": "string"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": true,
        "required": [
          "label",
          "description",
          "payment_hash",
          "status",
          "expires_at"
        ],
        "properties": {
          "label": {
            "type": "string",
            "description": "unique label supplied at invoice creation"
          },
          "description": {
            "type": "string",
            "description": "description used in the invoice"
          },
          "payment_hash": {
            "type": "hash",
            "description": "the hash of the *payment_preimage* which will prove payment",
            "maxLength": 64,
            "minLength": 64
          },
          "status": {
            "type": "string",
            "enum": [
              "paid",
              "expired"
            ],
            "description": "Whether it's paid or expired"
          },
          "expires_at": {
            "type": "u64",
            "description": "UNIX timestamp of when it will become / became unpayable"
          },
          "msatoshi": {
            "deprecated": "true"
          },
          "amount_msat": {
            "type": "msat",
            "description": "the amount required to pay this invoice"
          },
          "bolt11": {
            "type": "string",
            "description": "the BOLT11 string (always present unless *bolt12* is)"
          },
          "bolt12": {
            "type": "string",
            "description": "the BOLT12 string (always present unless *bolt11* is)"
          }
        },
        "allOf": [
          {
            "if": {
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "paid"
                  ]
                }
              }
            },
            "then": {
              "additionalProperties": false,
              "required": [
                "pay_index",
                "amount_received_msat",
                "paid_at",
                "payment_preimage"
              ],
              "properties": {
                "label": {},
                "description": {},
                "payment_hash": {},
                "status": {},
                "msatoshi": {},
                "amount_msat": {},
                "bolt11": {},
                "bolt12": {},
                "expires_at": {},
                "pay_index": {
                  "type": "u64",
                  "description": "Unique incrementing index for this payment"
                },
                "msatoshi_received": {
                  "deprecated": true
                },
                "amount_received_msat": {
                  "type": "msat",
                  "description": "the amount actually received (could be slightly greater than *amount_msat*, since clients may overpay)"
                },
                "paid_at": {
                  "type": "u64",
                  "description": "UNIX timestamp of when it was paid"
                },
                "payment_preimage": {
                  "type": "secret",
                  "description": "proof of payment",
                  "maxLength": 64,
                  "minLength": 64
                }
              }
            },
            "else": {
              "additionalProperties": false,
              "properties": {
                "label": {},
                "description": {},
                "payment_hash": {},
                "status": {},
                "msatoshi": {},
                "amount_msat": {},
                "bolt11": {},
                "bolt12": {},
                "expires_at": {}
              }
            }
          }
        ]
      }
    },
    "WaitSendPay": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "payment_hash"
        ],
        "properties": {
          "payment_hash": {
            "type": "hash"
          },
          "timeout": {
            "type": "u32"
          },
          "partid": {
            "type": "u64"
          },
          "groupid": {
            "type": "u64"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": true,
        "required": [
          "id",
          "payment_hash",
          "status",
          "created_at",
          "amount_sent_msat"
        ],
        "properties": {
          "id": {
            "type": "u64",
            "description": "unique ID for this payment attempt"
          },
          "groupid": {
            "type": "u64",
            "description": "Grouping key to disambiguate multiple attempts to pay an invoice or the same payment_hash"
          },
          "payment_hash": {
            "type": "hash",
            "description": "the hash of the *payment_preimage* which will prove payment",
            "maxLength": 64,
            "minLength": 64
          },
          "status": {
            "type": "string",
            "enum": [
              "complete"
            ],
            "description": "status of the payment"
          },
          "msatoshi": {
            "deprecated": true
          },
          "amount_msat": {
            "type": "msat",
            "description": "The amount delivered to destination (if known)"
          },
          "destination": {
            "type": "pubkey",
            "description": "the final destination of the payment if known"
          },
          "created_at": {
            "type": "u64",
            "description": "the UNIX timestamp showing when this payment was initiated"
          },
          "completed_at": {
            "type": "number",
            "description": "the UNIX timestamp showing when this payment was completed"
          },
          "msatoshi_sent": {
            "deprecated": true
          },
          "amount_sent_msat": {
            "type": "msat",
            "description": "The amount sent"
          },
          "label": {
            "type": "string",
            "description": "the label, if given to sendpay"
          },
          "partid": {
            "type": "u64",
            "description": "the *partid*, if given to sendpay"
          },
          "bolt11": {
            "type": "string",
            "description": "the bolt11 string (if pay supplied one)"
          },
          "bolt12": {
            "type": "string",
            "description": "the bolt12 string (if supplied for pay: **experimental-offers** only)."
          }
        },
        "allOf": [
          {
            "if": {
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "complete"
                  ]
                }
              }
            },
            "then": {
              "additionalProperties": false,
              "required": [
                "payment_preimage"
              ],
              "properties": {
                "id": {},
                "groupid": {},
                "payment_hash": {},
                "status": {},
                "msatoshi": {},
                "amount_msat": {},
                "destination": {},
                "created_at": {},
                "completed_at": {},
                "msatoshi_sent": {},
                "amount_sent_msat": {},
                "label": {},
                "partid": {},
                "bolt11": {},
                "bolt12": {},
                "payment_preimage": {
                  "type": "secret",
                  "description": "the proof of payment: SHA256 of this **payment_hash**",
                  "maxLength": 64,
                  "minLength": 64
                }
              }
            }
          }
        ]
      }
    },
    "NewAddr": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "additionalProperties": false,
        "properties": {
          "addresstype": {
            "type": "string",
            "enum": [
              "bech32",
              "p2sh-segwit",
              "all"
            ]
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [],
        "properties": {
          "bech32": {
            "type": "string",
            "description": "The bech32 (native segwit) address"
          },
          "p2sh-segwit": {
            "type": "string",
            "description": "The p2sh-wrapped address"
          }
        }
      }
    },
    "Withdraw": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "destination"
        ],
        "properties": {
          "destination": {
            "type": "string"
          },
          "satoshi": {
            "type": "msat_or_all"
          },
          "feerate": {
            "type": "feerate"
          },
          "minconf": {
            "type": "u16"
          },
          "utxos": {
            "type": "array",
            "items": {
              "type": "outpoint"
            }
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
          "psbt",
          "tx",
          "txid"
        ],
        "properties": {
          "tx": {
            "type": "hex",
            "description": "the fully signed bitcoin transaction"
          },
          "txid": {
            "type": "txid",
            "description": "the transaction id of *tx*"
          },
          "psbt": {
            "type": "string",
            "description": "the PSBT representing the unsigned transaction"
          }
        }
      }
    },
    "KeySend": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "destination",
          "amount_msat"
        ],
        "properties": {
          "destination": {
            "type": "pubkey"
          },
          "amount_msat": {
            "type": "msat"
          },
          "label": {
            "type": "string"
          },
          "maxfeepercent": {
            "type": "number"
          },
          "retry_for": {
            "type": "u32"
          },
          "maxdelay": {
            "type": "u32"
          },
          "exemptfee": {
            "type": "msat"
          },
          "routehints": {
            "type": "array",
            "items": {
              "type": "array",
              "items": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "id",
                  "scid",
                  "feebase",
                  "feeprop",
                  "expirydelta"
                ],
                "properties": {
                  "id": {
                    "type": "pubkey"
                  },
                  "scid": {
                    "type": "short_channel_id"
                  },
                  "feebase": {
                    "type": "msat"
                  },
                  "feeprop": {
                    "type": "u32"
                  },
                  "expirydelta": {
                    "type": "u16"
                  }
                }
              }
            }
          },
          "extratlvs": {
            "type": "object",
            "additionalProperties": true,
            "required": []
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "payment_preimage",
          "payment_hash",
          "created_at",
          "parts",
          "amount_msat",
          "amount_sent_msat",
          "status"
        ],
        "properties": {
          "payment_preimage": {
            "type": "secret",
            "description": "the proof of payment: SHA256 of this **payment_hash**",
            "maxLength": 64,
            "minLength": 64
          },
          "destination": {
            "type": "pubkey",
            "description": "the final destination of the payment"
          },
          "payment_hash": {
            "type": "hash",
            "description": "the hash of the *payment_preimage* which will prove payment",
            "maxLength": 64,
            "minLength": 64
          },
          "created_at": {
            "type": "number",
            "description": "the UNIX timestamp showing when this payment was initiated"
          },
          "parts": {
            "type": "u32",
            "description": "how many attempts this took"
          },
          "msatoshi": {
            "deprecated": true
          },
          "amount_msat": {
            "type": "msat",
            "description": "Amount the recipient received"
          },
          "msatoshi_sent": {
            "deprecated": true
          },
          "amount_sent_msat": {
            "type": "msat",
            "description": "Total amount we sent (including fees)"
          },
          "warning_partial_completion": {
            "type": "string",
            "description": "Not all parts of a multi-part payment have completed"
          },
          "status": {
            "type": "string",
            "enum": [
              "complete"
            ],
            "description": "status of payment"
          }
        }
      }
    },
    "FundPsbt": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "satoshi",
          "feerate",
          "startweight"
        ],
        "properties": {
          "satoshi": {
            "type": "msat_or_all"
          },
          "feerate": {
            "type": "feerate"
          },
          "startweight": {
            "type": "u32"
          },
          "minconf": {
            "type": "u32"
          },
          "reserve": {
            "type": "u32",
            "description": "reserve is a number: if non-zero number then reserveinputs is called (successfully, with exclusive true) on the returned PSBT for this number of blocks (default: 72)."
          },
          "locktime": {
            "type": "u32"
          },
          "min_witness_weight": {
            "type": "u32"
          },
          "excess_as_change": {
            "type": "boolean"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "psbt",
          "feerate_per_kw",
          "estimated_final_weight",
          "excess_msat"
        ],
        "properties": {
          "psbt": {
            "type": "string",
            "description": "Unsigned PSBT which fulfills the parameters given"
          },
          "feerate_per_kw": {
            "type": "u32",
            "description": "The feerate used to create the PSBT, in satoshis-per-kiloweight"
          },
          "estimated_final_weight": {
            "type": "u32",
            "description": "The estimated weight of the transaction once fully signed"
          },
          "excess_msat": {
            "type": "msat",
            "description": "The amount above *satoshi* which is available.  This could be zero, or dust; it will be zero if *change_outnum* is also returned"
          },
          "change_outnum": {
            "type": "u32",
            "description": "The 0-based output number where change was placed (only if parameter *excess_as_change* was true and there was sufficient funds)"
          },
          "reservations": {
            "type": "array",
            "description": "If *reserve* was true or a non-zero number, just as per lightning-reserveinputs(7)",
            "items": {
              "type": "object",
              "required": [
                "txid",
                "vout",
                "was_reserved",
                "reserved",
                "reserved_to_block"
              ],
              "additionalProperties": false,
              "properties": {
                "txid": {
                  "type": "txid",
                  "description": "The txid of the transaction"
                },
                "vout": {
                  "type": "u32",
                  "description": "The 0-based output number"
                },
                "was_reserved": {
                  "type": "boolean",
                  "enum": [
                    false
                  ],
                  "description": "Whether this output was previously reserved"
                },
                "reserved": {
                  "type": "boolean",
                  "enum": [
                    true
                  ],
                  "description": "Whether this output is now reserved"
                },
                "reserved_to_block": {
                  "type": "u32",
                  "description": "The blockheight the reservation will expire"
                }
              }
            }
          }
        }
      }
    },
    "SendPsbt": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "psbt"
        ],
        "properties": {
          "psbt": {
            "type": "string"
          },
          "reserve": {
            "type": "boolean"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "tx",
          "txid"
        ],
        "properties": {
          "tx": {
            "type": "hex",
            "description": "The raw transaction which was sent"
          },
          "txid": {
            "type": "txid",
            "description": "The txid of the **tx**"
          }
        }
      }
    },
    "SignPsbt": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "psbt"
        ],
        "properties": {
          "psbt": {
            "type": "string"
          },
          "signonly": {
            "type": "array",
            "items": {
              "type": "u32"
            }
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "signed_psbt"
        ],
        "properties": {
          "signed_psbt": {
            "type": "string",
            "description": "The fully signed PSBT"
          }
        }
      }
    },
    "UtxoPsbt": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "satoshi",
          "feerate",
          "startweight",
          "utxos"
        ],
        "properties": {
          "satoshi": {
            "type": "msat"
          },
          "feerate": {
            "type": "feerate"
          },
          "startweight": {
            "type": "u32"
          },
          "utxos": {
            "type": "array",
            "items": {
              "type": "outpoint"
            }
          },
          "reserve": {
            "type": "u32",
            "description": "reserve is a number: if non-zero number then reserveinputs is called (successfully, with exclusive true) on the returned PSBT for this number of blocks (default: 72)."
          },
          "reservedok": {
            "type": "boolean"
          },
          "locktime": {
            "type": "u32"
          },
          "min_witness_weight": {
            "type": "u32"
          },
          "excess_as_change": {
            "type": "boolean"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "psbt",
          "feerate_per_kw",
          "estimated_final_weight",
          "excess_msat"
        ],
        "properties": {
          "psbt": {
            "type": "string",
            "description": "Unsigned PSBT which fulfills the parameters given"
          },
          "feerate_per_kw": {
            "type": "u32",
            "description": "The feerate used to create the PSBT, in satoshis-per-kiloweight"
          },
          "estimated_final_weight": {
            "type": "u32",
            "description": "The estimated weight of the transaction once fully signed"
          },
          "excess_msat": {
            "type": "msat",
            "description": "The amount above *satoshi* which is available.  This could be zero, or dust; it will be zero if *change_outnum* is also returned"
          },
          "change_outnum": {
            "type": "u32",
            "description": "The 0-based output number where change was placed (only if parameter *excess_as_change* was true and there was sufficient funds)"
          },
          "reservations": {
            "type": "array",
            "description": "If *reserve* was true or a non-zero number, just as per lightning-reserveinputs(7)",
            "items": {
              "type": "object",
              "required": [
                "txid",
                "vout",
                "was_reserved",
                "reserved",
                "reserved_to_block"
              ],
              "additionalProperties": false,
              "properties": {
                "txid": {
                  "type": "txid",
                  "description": "The txid of the transaction"
                },
                "vout": {
                  "type": "u32",
                  "description": "The 0-based output number"
                },
                "was_reserved": {
                  "type": "boolean",
                  "description": "Whether this output was previously reserved"
                },
                "reserved": {
                  "type": "boolean",
                  "enum": [
                    true
                  ],
                  "description": "Whether this output is now reserved"
                },
                "reserved_to_block": {
                  "type": "u32",
                  "description": "The blockheight the reservation will expire"
                }
              }
            }
          }
        }
      }
    },
    "TxDiscard": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "txid"
        ],
        "properties": {
          "txid": {
            "type": "txid"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
          "unsigned_tx",
          "txid"
        ],
        "properties": {
          "unsigned_tx": {
            "type": "hex",
            "description": "the unsigned transaction"
          },
          "txid": {
            "type": "txid",
            "description": "the transaction id of *unsigned_tx*"
          }
        }
      }
    },
    "TxPrepare": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "outputs"
        ],
        "properties": {
          "outputs": {
            "type": "array",
            "items": {
              "type": "outputdesc"
            }
          },
          "feerate": {
            "type": "feerate"
          },
          "minconf": {
            "type": "u32"
          },
          "utxos": {
            "type": "array",
            "items": {
              "type": "outpoint"
            }
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
          "psbt",
          "unsigned_tx",
          "txid"
        ],
        "properties": {
          "psbt": {
            "type": "string",
            "description": "the PSBT representing the unsigned transaction"
          },
          "unsigned_tx": {
            "type": "hex",
            "description": "the unsigned transaction"
          },
          "txid": {
            "type": "txid",
            "description": "the transaction id of *unsigned_tx*; you hand this to lightning-txsend(7) or lightning-txdiscard(7), as the inputs of this transaction are reserved."
          }
        }
      }
    },
    "TxSend": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "txid"
        ],
        "properties": {
          "txid": {
            "type": "txid"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
          "psbt",
          "tx",
          "txid"
        ],
        "properties": {
          "psbt": {
            "type": "string",
            "description": "the completed PSBT representing the signed transaction"
          },
          "tx": {
            "type": "hex",
            "description": "the fully signed transaction"
          },
          "txid": {
            "type": "txid",
            "description": "the transaction id of *tx*"
          }
        }
      }
    },
    "Disconnect": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "pubkey"
          },
          "force": {
            "type": "boolean"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "properties": {}
      }
    },
    "Feerates": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "style"
        ],
        "properties": {
          "style": {
            "type": "string",
            "enum": [
              "perkb",
              "perkw"
            ]
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [],
        "properties": {
          "warning_missing_feerates": {
            "type": "string",
            "description": "Some fee estimates are missing"
          },
          "perkb": {
            "type": "object",
            "description": "If *style* parameter was perkb",
            "additionalProperties": false,
            "required": [
              "min_acceptable",
              "max_acceptable"
            ],
            "properties": {
              "min_acceptable": {
                "type": "u32",
                "description": "The smallest feerate that you can use, usually the minimum relayed feerate of the backend"
              },
              "max_acceptable": {
                "type": "u32",
                "description": "The largest feerate we will accept from remote negotiations.  If a peer attempts to set the feerate higher than this we will unilaterally close the channel (or simply forget it if it's not open yet)."
              },
              "opening": {
                "type": "u32",
                "description": "Default feerate for lightning-fundchannel(7) and lightning-withdraw(7)"
              },
              "mutual_close": {
                "type": "u32",
                "description": "Feerate to aim for in cooperative shutdown.  Note that since mutual close is a **negotiation**, the actual feerate used in mutual close will be somewhere between this and the corresponding mutual close feerate of the peer."
              },
              "unilateral_close": {
                "type": "u32",
                "description": "Feerate for commitment_transaction in a live channel which we originally funded"
              },
              "delayed_to_us": {
                "type": "u32",
                "description": "Feerate for returning unilateral close funds to our wallet"
              },
              "htlc_resolution": {
                "type": "u32",
                "description": "Feerate for returning unilateral close HTLC outputs to our wallet"
              },
              "penalty": {
                "type": "u32",
                "description": "Feerate to start at when penalizing a cheat attempt"
              }
            }
          },
          "perkw": {
            "type": "object",
            "description": "If *style* parameter was perkw",
            "additionalProperties": false,
            "required": [
              "min_acceptable",
              "max_acceptable"
            ],
            "properties": {
              "min_acceptable": {
                "type": "u32",
                "description": "The smallest feerate that you can use, usually the minimum relayed feerate of the backend"
              },
              "max_acceptable": {
                "type": "u32",
                "description": "The largest feerate we will accept from remote negotiations.  If a peer attempts to set the feerate higher than this we will unilaterally close the channel (or simply forget it if it's not open yet)."
              },
              "opening": {
                "type": "u32",
                "description": "Default feerate for lightning-fundchannel(7) and lightning-withdraw(7)"
              },
              "mutual_close": {
                "type": "u32",
                "description": "Feerate to aim for in cooperative shutdown.  Note that since mutual close is a **negotiation**, the actual feerate used in mutual close will be somewhere between this and the corresponding mutual close feerate of the peer."
              },
              "unilateral_close": {
                "type": "u32",
                "description": "Feerate for commitment_transaction in a live channel which we originally funded"
              },
              "delayed_to_us": {
                "type": "u32",
                "description": "Feerate for returning unilateral close funds to our wallet"
              },
              "htlc_resolution": {
                "type": "u32",
                "description": "Feerate for returning unilateral close HTLC outputs to our wallet"
              },
              "penalty": {
                "type": "u32",
                "description": "Feerate to start at when penalizing a cheat attempt"
              }
            }
          },
          "onchain_fee_estimates": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "opening_channel_satoshis",
              "mutual_close_satoshis",
              "unilateral_close_satoshis",
              "htlc_timeout_satoshis",
              "htlc_success_satoshis"
            ],
            "properties": {
              "opening_channel_satoshis": {
                "type": "u64",
                "description": "Estimated cost of typical channel open"
              },
              "mutual_close_satoshis": {
                "type": "u64",
                "description": "Estimated cost of typical channel close"
              },
              "unilateral_close_satoshis": {
                "type": "u64",
                "description": "Estimated cost of typical unilateral close (without HTLCs)"
              },
              "htlc_timeout_satoshis": {
                "type": "u64",
                "description": "Estimated cost of typical HTLC timeout transaction"
              },
              "htlc_success_satoshis": {
                "type": "u64",
                "description": "Estimated cost of typical HTLC fulfillment transaction"
              }
            }
          }
        }
      }
    },
    "FundChannelCancel": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "pubkey",
            "description": "id is the node id of the remote peer."
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "cancelled"
        ],
        "properties": {
          "cancelled": {
            "type": "string",
            "description": "A message indicating it was cancelled by RPC"
          }
        }
      }
    },
    "FundChannelComplete": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id",
          "psbt"
        ],
        "properties": {
          "id": {
            "type": "pubkey",
            "description": "id is the node id of the remote peer."
          },
          "psbt": {
            "type": "string",
            "description": "the transaction to use for funding (does not need to be signed but must be otherwise complete)."
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "channel_id",
          "commitments_secured"
        ],
        "properties": {
          "channel_id": {
            "type": "hex",
            "description": "The channel_id of the resulting channel",
            "minLength": 64,
            "maxLength": 64
          },
          "commitments_secured": {
            "type": "boolean",
            "enum": [
              true
            ],
            "description": "Indication that channel is safe to use"
          }
        }
      }
    },
    "FundChannel": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id",
          "amount"
        ],
        "properties": {
          "id": {
            "type": "pubkey",
            "description": "id is the peer id obtained from connect."
          },
          "amount": {
            "type": "msat_or_all"
          },
          "feerate": {
            "type": "feerate"
          },
          "announce": {
            "type": "boolean"
          },
          "minconf": {
            "type": "u32"
          },
          "push_msat": {
            "type": "msat"
          },
          "close_to": {
            "type": "string"
          },
          "request_amt": {
            "type": "msat"
          },
          "compact_lease": {
            "type": "string"
          },
          "utxos": {
            "type": "array",
            "items": {
              "type": "outpoint"
            }
          },
          "mindepth": {
            "description": "Number of confirmations required before we consider the channel active",
            "type": "u32"
          },
          "reserve": {
            "type": "msat",
            "description": "The amount we want the peer to maintain on its side"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "tx",
          "txid",
          "outnum",
          "channel_id"
        ],
        "properties": {
          "tx": {
            "type": "hex",
            "description": "The raw transaction which funded the channel"
          },
          "txid": {
            "type": "txid",
            "description": "The txid of the transaction which funded the channel"
          },
          "outnum": {
            "type": "u32",
            "description": "The 0-based output index showing which output funded the channel"
          },
          "channel_id": {
            "type": "hex",
            "description": "The channel_id of the resulting channel",
            "minLength": 64,
            "maxLength": 64
          },
          "close_to": {
            "type": "hex",
            "description": "The raw scriptPubkey which mutual close will go to; only present if *close_to* parameter was specified and peer supports `option_upfront_shutdown_script`"
          },
          "mindepth": {
            "type": "u32",
            "description": "Number of confirmations before we consider the channel active."
          }
        }
      }
    },
    "FundChannelStart": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id",
          "amount"
        ],
        "properties": {
          "id": {
            "type": "pubkey",
            "description": "id is the node id of the remote peer."
          },
          "amount": {
            "type": "msat_or_all",
            "description": ""
          },
          "feerate": {
            "type": "feerate"
          },
          "announce": {
            "type": "boolean"
          },
          "close_to": {
            "type": "hex",
            "description": "The raw scriptPubkey which mutual close will go to; only present if *close_to* parameter was specified and peer supports `option_upfront_shutdown_script`"
          },
          "push_msat": {
            "type": "msat",
            "description": "A warning not to prematurely broadcast the funding transaction (always present!)"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "funding_address",
          "scriptpubkey",
          "warning_usage"
        ],
        "properties": {
          "funding_address": {
            "type": "string",
            "description": "The address to send funding to for the channel. DO NOT SEND COINS TO THIS ADDRESS YET."
          },
          "scriptpubkey": {
            "type": "hex",
            "description": "The raw scriptPubkey for the address"
          },
          "close_to": {
            "type": "hex",
            "description": "The raw scriptPubkey which mutual close will go to; only present if *close_to* parameter was specified and peer supports `option_upfront_shutdown_script`"
          },
          "warning_usage": {
            "type": "string",
            "description": "A warning not to prematurely broadcast the funding transaction (always present!)"
          },
          "mindepth": {
            "type": "u32",
            "description": "Number of confirmations before we consider the channel active."
          }
        }
      }
    },
    "GetRoute": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
          "id",
          "amount_msat",
          "riskfactor"
        ],
        "properties": {
          "id": {
            "type": "pubkey",
            "description": ""
          },
          "amount_msat": {
            "type": "msat",
            "description": ""
          },
          "riskfactor": {
            "type": "u64",
            "description": ""
          },
          "cltv": {
            "type": "number",
            "description": ""
          },
          "fromid": {
            "type": "pubkey",
            "description": ""
          },
          "fuzzpercent": {
            "type": "u32",
            "description": ""
          },
          "exclude": {
            "type": "array",
            "description": "",
            "items": {
              "type": "string"
            }
          },
          "maxhops": {
            "type": "u32",
            "description": ""
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "route"
        ],
        "properties": {
          "route": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "id",
                "direction",
                "channel",
                "amount_msat",
                "delay",
                "style"
              ],
              "additionalProperties": false,
              "properties": {
                "id": {
                  "type": "pubkey",
                  "description": "The node at the end of this hop"
                },
                "channel": {
                  "type": "short_channel_id",
                  "description": "The channel joining these nodes"
                },
                "direction": {
                  "type": "u32",
                  "description": "0 if this channel is traversed from lesser to greater **id**, otherwise 1"
                },
                "msatoshi": {
                  "type": "u64",
                  "deprecated": true
                },
                "amount_msat": {
                  "type": "msat",
                  "description": "The amount expected by the node at the end of this hop"
                },
                "delay": {
                  "type": "u32",
                  "description": "The total CLTV expected by the node at the end of this hop"
                },
                "style": {
                  "type": "string",
                  "description": "The features understood by the destination node",
                  "enum": [
                    "tlv"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "ListForwards": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "offered",
              "settled",
              "local_failed",
              "failed"
            ]
          },
          "in_channel": {
            "type": "short_channel_id"
          },
          "out_channel": {
            "type": "short_channel_id"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "forwards"
        ],
        "properties": {
          "forwards": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true,
              "required": [
                "in_channel",
                "in_msat",
                "status",
                "received_time"
              ],
              "properties": {
                "in_channel": {
                  "type": "short_channel_id",
                  "description": "the channel that received the HTLC"
                },
                "in_htlc_id": {
                  "type": "u64",
                  "description": "the unique HTLC id the sender gave this (not present if incoming channel was closed before ugprade to v22.11)"
                },
                "in_msatoshi": {
                  "deprecated": true
                },
                "in_msat": {
                  "type": "msat",
                  "description": "the value of the incoming HTLC"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "offered",
                    "settled",
                    "local_failed",
                    "failed"
                  ],
                  "description": "still ongoing, completed, failed locally, or failed after forwarding"
                },
                "received_time": {
                  "type": "number",
                  "description": "the UNIX timestamp when this was received"
                },
                "out_channel": {
                  "type": "short_channel_id",
                  "description": "the channel that the HTLC (trying to) forward to"
                },
                "out_htlc_id": {
                  "type": "u64",
                  "description": "the unique HTLC id we gave this when sending (may be missing even if out_channel is present, for old forwards before v22.11)"
                },
                "style": {
                  "type": "string",
                  "enum": [
                    "legacy",
                    "tlv"
                  ],
                  "description": "Either a legacy onion format or a modern tlv format"
                }
              },
              "allOf": [
                {
                  "if": {
                    "required": [
                      "out_msat"
                    ]
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "fee_msat",
                      "out_msat",
                      "out_channel"
                    ],
                    "properties": {
                      "in_channel": {},
                      "in_htlc_id": {},
                      "in_msatoshi": {},
                      "in_msat": {},
                      "status": {},
                      "style": {},
                      "received_time": {},
                      "resolved_time": {},
                      "out_channel": {},
                      "out_htlc_id": {},
                      "failcode": {},
                      "failreason": {},
                      "fee": {
                        "deprecated": true
                      },
                      "fee_msat": {
                        "type": "msat",
                        "description": "the amount this paid in fees"
                      },
                      "out_msatoshi": {
                        "deprecated": true
                      },
                      "out_msat": {
                        "type": "msat",
                        "description": "the amount we sent out the *out_channel*"
                      }
                    }
                  },
                  "else": {
                    "additionalProperties": false,
                    "required": [],
                    "properties": {
                      "in_channel": {},
                      "in_htlc_id": {},
                      "in_msatoshi": {},
                      "in_msat": {},
                      "status": {},
                      "style": {},
                      "received_time": {},
                      "resolved_time": {},
                      "failcode": {},
                      "failreason": {},
                      "out_channel": {}
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "settled",
                          "failed"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "resolved_time"
                    ],
                    "properties": {
                      "in_channel": {},
                      "in_htlc_id": {},
                      "in_msatoshi": {},
                      "in_msat": {},
                      "status": {},
                      "style": {},
                      "received_time": {},
                      "out_channel": {},
                      "out_htlc_id": {},
                      "fee": {},
                      "fee_msat": {},
                      "out_msatoshi": {},
                      "out_msat": {},
                      "failcode": {},
                      "failreason": {},
                      "resolved_time": {
                        "type": "number",
                        "description": "the UNIX timestamp when this was resolved"
                      }
                    }
                  },
                  "else": {
                    "additionalProperties": false,
                    "properties": {
                      "in_channel": {},
                      "in_htlc_id": {},
                      "in_msatoshi": {},
                      "in_msat": {},
                      "status": {},
                      "style": {},
                      "received_time": {},
                      "out_channel": {},
                      "out_htlc_id": {},
                      "fee": {},
                      "fee_msat": {},
                      "failcode": {},
                      "failreason": {},
                      "out_msatoshi": {},
                      "out_msat": {}
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "local_failed",
                          "failed"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [],
                    "properties": {
                      "in_channel": {},
                      "in_htlc_id": {},
                      "in_msatoshi": {},
                      "in_msat": {},
                      "status": {},
                      "style": {},
                      "received_time": {},
                      "out_channel": {},
                      "out_htlc_id": {},
                      "fee": {},
                      "fee_msat": {},
                      "out_msatoshi": {},
                      "out_msat": {},
                      "resolved_time": {},
                      "failcode": {
                        "type": "u32",
                        "description": "the numeric onion code returned"
                      },
                      "failreason": {
                        "type": "string",
                        "description": "the name of the onion code returned"
                      }
                    }
                  },
                  "else": {
                    "additionalProperties": false,
                    "required": [],
                    "properties": {
                      "in_channel": {},
                      "in_htlc_id": {},
                      "in_msatoshi": {},
                      "in_msat": {},
                      "status": {},
                      "style": {},
                      "received_time": {},
                      "out_channel": {},
                      "out_htlc_id": {},
                      "fee": {},
                      "fee_msat": {},
                      "out_msatoshi": {},
                      "out_msat": {},
                      "resolved_time": {}
                    }
                  }
                }
              ]
            }
          }
        }
      }
    },
    "ListPays": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [],
        "additionalProperties": false,
        "properties": {
          "bolt11": {
            "type": "string"
          },
          "payment_hash": {
            "type": "hash"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "complete",
              "failed"
            ]
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "pays"
        ],
        "properties": {
          "pays": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": true,
              "required": [
                "payment_hash",
                "status",
                "created_at"
              ],
              "properties": {
                "payment_hash": {
                  "type": "hex",
                  "description": "the hash of the *payment_preimage* which will prove payment",
                  "maxLength": 64,
                  "minLength": 64
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "pending",
                    "failed",
                    "complete"
                  ],
                  "description": "status of the payment"
                },
                "destination": {
                  "type": "pubkey",
                  "description": "the final destination of the payment if known"
                },
                "created_at": {
                  "type": "u64",
                  "description": "the UNIX timestamp showing when this payment was initiated"
                },
                "completed_at": {
                  "type": "u64",
                  "description": "the UNIX timestamp showing when this payment was completed"
                },
                "label": {
                  "type": "string",
                  "description": "the label, if given to sendpay"
                },
                "bolt11": {
                  "type": "string",
                  "description": "the bolt11 string (if pay supplied one)"
                },
                "description": {
                  "type": "string",
                  "description": "the description matching the bolt11 description hash (if pay supplied one)"
                },
                "bolt12": {
                  "type": "string",
                  "description": "the bolt12 string (if supplied for pay: **experimental-offers** only)."
                }
              },
              "allOf": [
                {
                  "if": {
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "complete"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "amount_sent_msat",
                      "preimage"
                    ],
                    "properties": {
                      "payment_hash": {},
                      "status": {},
                      "destination": {},
                      "created_at": {},
                      "completed_at": {},
                      "label": {},
                      "bolt11": {},
                      "description": {},
                      "bolt12": {},
                      "amount_msat": {},
                      "amount_sent_msat": {},
                      "preimage": {
                        "type": "hex",
                        "description": "proof of payment",
                        "maxLength": 64,
                        "minLength": 64
                      },
                      "number_of_parts": {
                        "type": "u64",
                        "description": "the number of parts for a successful payment (only if more than one)."
                      }
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "failed"
                        ]
                      }
                    }
                  },
                  "then": {
                    "additionalProperties": false,
                    "required": [
                      "amount_sent_msat"
                    ],
                    "properties": {
                      "payment_hash": {},
                      "status": {},
                      "destination": {},
                      "created_at": {},
                      "label": {},
                      "bolt11": {},
                      "description": {},
                      "bolt12": {},
                      "amount_sent_msat": {},
                      "erroronion": {
                        "type": "hex",
                        "description": "the error onion returned on failure, if any."
                      }
                    }
                  }
                }
              ]
            }
          }
        }
      }
    },
    "Ping": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
          "id"
        ],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "pubkey"
          },
          "len": {
            "type": "number"
          },
          "pongbytes": {
            "type": "number"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "totlen"
        ],
        "properties": {
          "totlen": {
            "type": "u16",
            "description": "the answer length of the reply message (including header: 0 means no reply expected)"
          }
        }
      }
    },
    "SetChannel": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "feebase": {
            "type": "msat"
          },
          "feeppm": {
            "type": "u32"
          },
          "htlcmin": {
            "type": "msat"
          },
          "htlcmax": {
            "type": "msat"
          },
          "enforcedelay": {
            "type": "u32"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "channels"
        ],
        "properties": {
          "channels": {
            "type": "array",
            "description": "channel(s) set, and their resulting configuration",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "peer_id",
                "channel_id",
                "fee_base_msat",
                "fee_proportional_millionths",
                "minimum_htlc_out_msat",
                "maximum_htlc_out_msat"
              ],
              "properties": {
                "peer_id": {
                  "type": "pubkey",
                  "description": "The node_id of the peer"
                },
                "channel_id": {
                  "type": "hex",
                  "description": "The channel_id of the channel",
                  "minLength": 64,
                  "maxLength": 64
                },
                "short_channel_id": {
                  "type": "short_channel_id",
                  "description": "the short_channel_id (if locked in)"
                },
                "fee_base_msat": {
                  "type": "msat",
                  "description": "The resulting feebase (this is the BOLT #7 name)"
                },
                "fee_proportional_millionths": {
                  "type": "u32",
                  "description": "The resulting feeppm (this is the BOLT #7 name)"
                },
                "minimum_htlc_out_msat": {
                  "type": "msat",
                  "description": "The resulting htlcmin we will advertize (the BOLT #7 name is htlc_minimum_msat)"
                },
                "warning_htlcmin_too_low": {
                  "type": "string",
                  "description": "The requested htlcmin was too low for this peer, so we set it to the minimum they will allow"
                },
                "maximum_htlc_out_msat": {
                  "type": "msat",
                  "description": "The resulting htlcmax we will advertize (the BOLT #7 name is htlc_maximum_msat)"
                },
                "warning_htlcmax_too_high": {
                  "type": "string",
                  "description": "The requested htlcmax was greater than the channel capacity, so we set it to the channel capacity"
                }
              }
            }
          }
        }
      }
    },
    "SignMessage": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
          "message"
        ],
        "additionalProperties": false,
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "signature",
          "recid",
          "zbase"
        ],
        "properties": {
          "signature": {
            "type": "hex",
            "description": "The signature",
            "minLength": 128,
            "maxLength": 128
          },
          "recid": {
            "type": "hex",
            "description": "The recovery id (0, 1, 2 or 3)",
            "minLength": 2,
            "maxLength": 2
          },
          "zbase": {
            "type": "string",
            "description": "*signature* and *recid* encoded in a style compatible with **lnd**'s [SignMessageRequest](https://api.lightning.community/#grpc-request-signmessagerequest)"
          }
        }
      }
    },
    "Stop": {
      "request": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": [],
        "properties": {}
      },
      "response": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "string",
        "enum": [
          "Shutdown complete"
        ]
      }
    }
  }
}