{
  "$schema": "../../rpc-schema-draft.json",
  "type": "object",
  "additionalProperties": false,
  "notification": "forward_event",
  "title": "Notification for forward payment status changes",
  "description": [
    "A notification for topic forward_event is sent every time the status of a forward payment is set. The json format is same as the API listforwards."
  ],
  "added": "pre-v0.10.1",
  "request": {},
  "response": {
    "required": [
      "payment_hash",
      "in_channel",
      "in_msat",
      "status",
      "received_time"
    ],
    "properties": {
      "created_index": {
        "type": "u64",
        "added": "v23.11",
        "description": [
          "1-based index indicating order this forward was created in."
        ]
      },
      "updated_index": {
        "type": "u64",
        "added": "v23.11",
        "description": [
          "1-based index indicating order this forward was changed (only present if it has changed since creation)."
        ]
      },
      "payment_hash": {
        "type": "hash",
        "added": "pre-v0.10.1",
        "description": [
          "The hash of the payment."
        ]
      },
      "in_channel": {
        "type": "short_channel_id",
        "added": "pre-v0.10.1",
        "description": [
          "The channel that received the HTLC."
        ]
      },
      "in_htlc_id": {
        "type": "u64",
        "added": "v22.11",
        "description": [
          "The unique HTLC id the sender gave this (not present if incoming channel was closed before upgrade to v22.11)."
        ]
      },
      "out_channel": {
        "type": "short_channel_id",
        "added": "pre-v0.10.1",
        "description": [
          "The channel that the HTLC (trying to) forward to."
        ]
      },
      "out_htlc_id": {
        "type": "u64",
        "added": "v22.11",
        "description": [
          "The unique HTLC id we gave this when sending (may be missing even if out_channel is present, for old forwards before v22.11)."
        ]
      },
      "in_msat": {
        "type": "msat",
        "added": "pre-v0.10.1",
        "description": [
          "The value of the incoming HTLC."
        ]
      },
      "out_msat": {
        "type": "msat",
        "added": "pre-v0.10.1",
        "description": [
          "The amount we sent out the out_channel."
        ]
      },
      "fee_msat": {
        "type": "msat",
        "added": "pre-v0.10.1",
        "description": [
          "The amount this paid in fees."
        ]
      },
      "status": {
        "type": "string",
        "enum": [
          "offered",
          "settled",
          "local_failed",
          "failed"
        ],
        "added": "pre-v0.10.1",
        "description": [
          "Still ongoing, completed, failed locally, or failed after forwarding."
        ]
      },
      "failcode": {
        "type": "u32",
        "added": "pre-v0.10.1",
        "description": [
          "The numeric onion code returned (only present if status is local_failed or failed)."
        ]
      },
      "failreason": {
        "type": "string",
        "added": "pre-v0.10.1",
        "description": [
          "The name of the onion code returned (only present if status is local_failed or failed)."
        ]
      },
      "style": {
        "type": "string",
        "enum": [
          "legacy",
          "tlv"
        ],
        "added": "pre-v0.10.1",
        "description": [
          "Either a legacy onion format or a modern tlv format."
        ]
      },
      "received_time": {
        "type": "number",
        "added": "pre-v0.10.1",
        "description": [
          "The UNIX timestamp when this was received (may be zero for old forwards)."
        ]
      },
      "resolved_time": {
        "type": "number",
        "added": "pre-v0.10.1",
        "description": [
          "The UNIX timestamp when this was resolved (only present for settled and failed status)."
        ]
      }
    }
  }
}
