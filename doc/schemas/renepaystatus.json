{
  "$schema": "../rpc-schema-draft.json",
  "type": "object",
  "rpc": "renepaystatus",
  "title": "Command for quering the status of previous renepay attempts",
  "added": "v23.08",
  "description": [
    "The **renepaystatus** RPC command queries the payment plugin **renepay** for the status of previous payment attempts.",
    "",
    "This command always succeeds."
  ],
  "request": {
    "required": [],
    "additionalProperties": false,
    "properties": {
      "invstring": {
        "type": "string",
        "description": [
          "If specified, the command will return a list of payment attempts whose invoice matches *invstring*, otherwise all payments with be listed."
        ]
      }
    }
  },
  "response": {
    "required": [
      "paystatus"
    ],
    "additionalProperties": false,
    "properties": {
      "paystatus": {
        "type": "array",
        "description": [
          "A list of payments attempted by renepay."
        ],
        "items": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "bolt11",
            "payment_hash",
            "created_at",
            "groupid",
            "amount_msat",
            "status"
          ],
          "properties": {
            "bolt11": {
              "type": "string",
              "description": [
                "Invoice string BOLT11."
              ]
            },
            "payment_preimage": {
              "type": "secret",
              "description": [
                "The proof of payment: SHA256 of this **payment_hash** (for completed payments only)."
              ]
            },
            "payment_hash": {
              "type": "hash",
              "description": [
                "The hash of the *payment_preimage* which will prove payment."
              ]
            },
            "created_at": {
              "type": "number",
              "description": [
                "The UNIX timestamp showing when this payment was initiated."
              ]
            },
            "groupid": {
              "type": "u32",
              "description": [
                "The id for this payment attempt."
              ]
            },
            "parts": {
              "type": "u32",
              "description": [
                "How many attempts this took."
              ]
            },
            "amount_msat": {
              "type": "msat",
              "description": [
                "Amount the recipient received."
              ]
            },
            "amount_sent_msat": {
              "type": "msat",
              "description": [
                "Total amount we sent including fees (for completed payments only)."
              ]
            },
            "status": {
              "type": "string",
              "enum": [
                "complete",
                "pending",
                "failed"
              ],
              "description": [
                "Status of payment."
              ]
            },
            "destination": {
              "type": "pubkey",
              "description": [
                "The final destination of the payment."
              ]
            },
            "notes": {
              "type": "array",
              "description": [
                "A list of messages for debugging purposes."
              ],
              "items": {
                "type": "string",
                "description": [
                  "A message generated by renepay."
                ]
              }
            }
          }
        }
      }
    }
  },
  "author": [
    "Eduardo Quintana-Miranda <<eduardo.quintana@pm.me>> is mainly responsible."
  ],
  "see_also": [
    "lightning-renepay(7)",
    "lightning-listpays(7)"
  ],
  "resources": [
    "Main web site: <https://github.com/ElementsProject/lightning>"
  ],
  "examples": [
    {
      "request": {
        "id": "example:renepaystatus#1",
        "method": "renepaystatus",
        "params": {
          "invstring": "lnbcrt1pne035qsp5j7czxfpnquxg9vcw9crqh87raxz0glv8n6gx88jwdsp28pmfk68qpp5uz6ktrhcug72ke2xaf0h099gcasysw4lxcfmxn6qrh6p9z2y47hqdqcdserzgryv4ekxunfwp6xjmmwxqyjw5qcqp9rzjqdwjkyvjm7apxnssu4qgwhfkd67ghs6n6k48v6uqczgt88p6tky96qqqwqqqqqgqqqqqqqqpqqqqqzsqqc9qxpqysgqn7ge40jwkslz0j0vhfzy743lathy2sqy2dfyyahalxszs979d9s5v89ten2zcrna3xlxhkerk7p9k7a6u5fdddx5dzzas4ye2yp6desq3zwkg2"
        }
      },
      "response": {
        "paystatus": [
          {
            "bolt11": "lnbcrt1pne035qsp5j7czxfpnquxg9vcw9crqh87raxz0glv8n6gx88jwdsp28pmfk68qpp5uz6ktrhcug72ke2xaf0h099gcasysw4lxcfmxn6qrh6p9z2y47hqdqcdserzgryv4ekxunfwp6xjmmwxqyjw5qcqp9rzjqdwjkyvjm7apxnssu4qgwhfkd67ghs6n6k48v6uqczgt88p6tky96qqqwqqqqqgqqqqqqqqpqqqqqzsqqc9qxpqysgqn7ge40jwkslz0j0vhfzy743lathy2sqy2dfyyahalxszs979d9s5v89ten2zcrna3xlxhkerk7p9k7a6u5fdddx5dzzas4ye2yp6desq3zwkg2",
            "amount_msat": 400000,
            "payment_hash": "e0b5658ef8e23cab6546ea5f7794a8c760483abf3613b34f401df4128944afae",
            "destination": "022d223620a359a47ff7f7ac447c85c46c923da53389221a0054c11c1e3ca31d59",
            "created_at": 1738000000.0,
            "groupid": 1,
            "parts": 2,
            "status": "complete",
            "payment_preimage": "08377744ca985c1908377744ca985c1908377744ca985c1908377744ca985c19",
            "amount_sent_msat": 400000
          }
        ]
      }
    }
  ]
}
