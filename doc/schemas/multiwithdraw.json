{
  "$schema": "../rpc-schema-draft.json",
  "type": "object",
  "rpc": "multiwithdraw",
  "title": "Command for withdrawing to multiple addresses",
  "description": [
    "The **multiwithdraw** RPC command sends funds from Core Lightning's internal wallet to the addresses specified in *outputs*."
  ],
  "request": {
    "required": [
      "outputs"
    ],
    "additionalProperties": false,
    "properties": {
      "outputs": {
        "type": "array",
        "items": {
          "type": "outputdesc"
        },
        "description": [
          "An array containing objects of the form `{address: amount}`. The `amount` may be the string *all*, indicating that all onchain funds be sent to the specified address. Otherwise, it is in satoshi precision; it can be a whole number, a whole number ending in *sat*, a whole number ending in *000msat*, or a number with 1 to 8 decimal places ending in *btc*."
        ]
      },
      "feerate": {
        "type": "feerate",
        "description": [
          "Feerate used for the withdrawals. See NOTES in lightning-feerates(7) for possible values."
        ],
        "default": "*normal*"
      },
      "minconf": {
        "type": "u32",
        "description": [
          "Minimum number of confirmations that used outputs should have."
        ],
        "default": 1
      },
      "utxos": {
        "type": "array",
        "items": {
          "type": "outpoint",
          "description": [
            "Utxos to be used to be withdrawn from, as an array of `txid:vout`. These must be drawn from the node's available UTXO set."
          ]
        }
      }
    }
  },
  "response": {
    "required": [
      "tx",
      "txid"
    ],
    "additionalProperties": false,
    "properties": {
      "tx": {
        "type": "hex",
        "description": [
          "The raw transaction which was sent."
        ]
      },
      "txid": {
        "type": "txid",
        "description": [
          "The txid of the **tx**."
        ]
      }
    }
  },
  "errors": [
    "On failure, an error is reported and the withdrawal transaction is not created.",
    "",
    "- -1: Catchall nonspecific error.",
    "- 301: There are not enough funds in the internal wallet (including fees) to create the transaction.",
    "- 302: The dust limit is not met."
  ],
  "author": [
    "ZmnSCPxj <<ZmnSCPxj@protonmail.com>> is mainly responsible."
  ],
  "see_also": [
    "lightning-listfunds(7)",
    "lightning-fundchannel(7)",
    "lightning-newaddr(7)",
    "lightning-txprepare(7)",
    "lightning-withdraw(7)"
  ],
  "resources": [
    "Main web site: <https://github.com/ElementsProject/lightning>"
  ],
  "examples": [
    {
      "request": {
        "id": "example:multiwithdraw#1",
        "method": "multiwithdraw",
        "params": {
          "outputs": [
            {
              "bcrt1q84payf4ucfcpnt0994arm3f20tqmu29cna738w": "2222000msat"
            },
            {
              "bcrt1q64wyjwvrmdj3uyz8w32mr4qgcv08a833zepjm3": "3333000msat"
            }
          ]
        }
      },
      "response": {
        "tx": "0200000000010190ee63cdc0e3f2b01c954abef709af77c0d966ca3f45b6b39ab9cfb6546c7a790000000000fdffffff03ae080000000000001600143d43d226bcc27019ade52d7a3dc52a7ac1be28b8f74e080000000000225120875b3dfe08354212207c94733807164505835a44100738a9c27a62bd5deef480050d000000000000160014d55c493983db651e10477455b1d408c31e7e9e310247304402205fad492ec062feca17e59887dabbea8100f2e4ec7fcfe5abeb7f88457c4cf4a10220445a0b8813843f05c1c87571e25dfebe6c54cb91dd80560e383b0de90d78b788012103a26fcdff9cd9ce50aefbe3efcb26788cee5808e312d1d6d35603a368ded1d68c2c000000",
        "txid": "3b35298b22d2b6cd9e7362827cc9e2a51f445654e0614952ad9eb2d7cd95a10c"
      }
    },
    {
      "request": {
        "id": "example:multiwithdraw#2",
        "method": "multiwithdraw",
        "params": {
          "outputs": [
            {
              "bcrt1p97zrhgxgm6wscsdx8gjafj4jyqetunat7fynrk4cyg2rz6lzrr9q6dlrp2": 1000
            },
            {
              "bcrt1qm7k64cvd2ljw758ptwrrm8ny30u67ea3cfkxpn": 1000
            },
            {
              "bcrt1qdgvytwcw58uwlf3lqrej2eqaku6smn2mdvkycp": 1000
            },
            {
              "bcrt1q68wfpfam8tu3a457jv7u8r64tdvqltgfs0kj84": 1000
            },
            {
              "bcrt1qq7g9ccvfcxhg4lcj2e4s8u6l75tdzl5y7krmtl": 1000
            },
            {
              "bcrt1pp9uw53lnrtt9v8vkemhpf6z3jfex2dkyu8je6z0jzlem2a3tqccqvseg2y": 1000
            },
            {
              "bcrt1q5sacyx5hjrugpcgn5w2mw9aq7d2tnkwxmmjp06": 1000
            }
          ]
        }
      },
      "response": {
        "tx": "0200000000010190ee63cdc0e3f2b01c954abef709af77c0d966ca3f45b6b39ab9cfb6546c7a790100000000fdffffff08e803000000000000160014a43b821a9790f880e113a395b717a0f354b9d9c6e687150000000000225120327b99fbacbcc3bbcf9489bf7f3dac2642d933685754f558586afbacd17f9c26e8030000000000002251202f843ba0c8de9d0c41a63a25d4cab22032be4fabf24931dab82214316be218cae8030000000000002251200978ea47f31ad6561d96ceee14e85192726536c4e1e59d09f217f3b5762b0630e80300000000000016001407905c6189c1ae8aff12566b03f35ff516d17e84e803000000000000160014d1dc90a7bb3af91ed69e933dc38f555b580fad09e8030000000000001600146a1845bb0ea1f8efa63f00f325641db7350dcd5be803000000000000160014dfadaae18d57e4ef50e15b863d9e648bf9af67b10140eeb15b713763a95f40db82138b6f02a8ae8e49aad37ab3647d943a27713069f87376087de9ba49b7a477581f02cf4b4de25a468ee611b7a1ca2e71c3b1e179748c000000",
        "txid": "59d7273c7dde3b2786f7325da08a303779ee718443aaa25d03db19c9e909591b"
      }
    }
  ]
}
