{
  "$schema": "../rpc-schema-draft.json",
  "type": "object",
  "additionalProperties": false,
  "rpc": "renepaystatus",
  "title": "Command for quering the status of previous renepay attempts",
  "added": "v23.08",
  "description": [
    "The **renepaystatus** RPC command queries the payment plugin **renepay** for the status of previous payment attempts.",
    "",
    "This command always succeeds."
  ],
  "request": {
    "required": [],
    "properties": {
      "invstring": {
        "type": "string",
        "description": [
          "If specified, the command will return a list of payment attempts whose invoice matches *invstring*, otherwise all payments with be listed."
        ]
      }
    }
  },
  "response": {
    "required": [
      "paystatus"
    ],
    "properties": {
      "paystatus": {
        "type": "array",
        "description": [
          "A list of payments attempted by renepay."
        ],
        "items": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "bolt11",
            "payment_hash",
            "created_at",
            "groupid",
            "amount_msat",
            "status",
            "notes"
          ],
          "properties": {
            "bolt11": {
              "type": "string",
              "description": [
                "Invoice string BOLT11."
              ]
            },
            "payment_preimage": {
              "type": "secret",
              "description": [
                "The proof of payment: SHA256 of this **payment_hash** (for completed payments only)."
              ]
            },
            "payment_hash": {
              "type": "hash",
              "description": [
                "The hash of the *payment_preimage* which will prove payment."
              ]
            },
            "created_at": {
              "type": "number",
              "description": [
                "The UNIX timestamp showing when this payment was initiated."
              ]
            },
            "groupid": {
              "type": "u32",
              "description": [
                "The id for this payment attempt."
              ]
            },
            "parts": {
              "type": "u32",
              "description": [
                "How many attempts this took."
              ]
            },
            "amount_msat": {
              "type": "msat",
              "description": [
                "Amount the recipient received."
              ]
            },
            "amount_sent_msat": {
              "type": "msat",
              "description": [
                "Total amount we sent including fees (for completed payments only)."
              ]
            },
            "status": {
              "type": "string",
              "enum": [
                "complete",
                "pending",
                "failed"
              ],
              "description": [
                "Status of payment."
              ]
            },
            "destination": {
              "type": "pubkey",
              "description": [
                "The final destination of the payment."
              ]
            },
            "notes": {
              "type": "array",
              "description": [
                "A list of messages for debugging purposes."
              ],
              "items": {
                "type": "string",
                "description": [
                  "A message generated by renepay."
                ]
              }
            }
          }
        }
      }
    }
  },
  "author": [
    "Eduardo Quintana-Miranda <<eduardo.quintana@pm.me>> is mainly responsible."
  ],
  "see_also": [
    "lightning-renepay(7)",
    "lightning-listpays(7)"
  ],
  "resources": [
    "Main web site: <https://github.com/ElementsProject/lightning>"
  ]
}
