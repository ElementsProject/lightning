{
  "$schema": "../rpc-schema-draft.json",
  "type": "object",
  "additionalProperties": false,
  "rpc": "renepaystatus",
  "title": "Command for quering the status of previous renepay attempts",
  "added": "v23.08",
  "description": [
    "The **renepaystatus** RPC command queries the payment plugin **renepay** for the status of previous payment attempts.",
    "",
    "This command always succeeds."
  ],
  "request": {
    "required": [],
    "properties": {
      "invstring": {
        "type": "string",
        "description": [
          "If specified, the command will return a list of payment attempts whose invoice matches *invstring*, otherwise all payments with be listed."
        ]
      }
    }
  },
  "response": {
    "required": [
      "paystatus"
    ],
    "properties": {
      "paystatus": {
        "type": "array",
        "description": [
          "A list of payments attempted by renepay."
        ],
        "items": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "bolt11",
            "payment_hash",
            "created_at",
            "groupid",
            "amount_msat",
            "status"
          ],
          "properties": {
            "bolt11": {
              "type": "string",
              "description": [
                "Invoice string BOLT11."
              ]
            },
            "payment_preimage": {
              "type": "secret",
              "description": [
                "The proof of payment: SHA256 of this **payment_hash** (for completed payments only)."
              ]
            },
            "payment_hash": {
              "type": "hash",
              "description": [
                "The hash of the *payment_preimage* which will prove payment."
              ]
            },
            "created_at": {
              "type": "number",
              "description": [
                "The UNIX timestamp showing when this payment was initiated."
              ]
            },
            "groupid": {
              "type": "u32",
              "description": [
                "The id for this payment attempt."
              ]
            },
            "parts": {
              "type": "u32",
              "description": [
                "How many attempts this took."
              ]
            },
            "amount_msat": {
              "type": "msat",
              "description": [
                "Amount the recipient received."
              ]
            },
            "amount_sent_msat": {
              "type": "msat",
              "description": [
                "Total amount we sent including fees (for completed payments only)."
              ]
            },
            "status": {
              "type": "string",
              "enum": [
                "complete",
                "pending",
                "failed"
              ],
              "description": [
                "Status of payment."
              ]
            },
            "destination": {
              "type": "pubkey",
              "description": [
                "The final destination of the payment."
              ]
            },
            "notes": {
              "type": "array",
              "description": [
                "A list of messages for debugging purposes."
              ],
              "items": {
                "type": "string",
                "description": [
                  "A message generated by renepay."
                ]
              }
            }
          }
        }
      }
    }
  },
  "author": [
    "Eduardo Quintana-Miranda <<eduardo.quintana@pm.me>> is mainly responsible."
  ],
  "see_also": [
    "lightning-renepay(7)",
    "lightning-listpays(7)"
  ],
  "resources": [
    "Main web site: <https://github.com/ElementsProject/lightning>"
  ],
  "examples": [
    {
      "request": {
        "id": "example:renepaystatus#1",
        "method": "renepaystatus",
        "params": {
          "invstring": "lnbcrt1pn2s3xxsp5xvccgadvepzypat5v8u8tstwdvn9ez4908h7ntl4s0ggx76ug4cqpp50qwurth9swdlzphjvjc2qm8sws8jcu0u28y4vt5s7nhr3js0c3vsdqcdserzgryv4ekxunfwp6xjmmwxqyjw5qcqp9rzjqdwjkyvjm7apxnssu4qgwhfkd67ghs6n6k48v6uqczgt88p6tky96qqqduqqqqgqqqqqqqqpqqqqqzsqqc9qxpqysgqw4qfxj30wqn2m2qmcfz2gs6ttszdhkc0kjqk0mgg59tj2cy90wcke4tjzmzakrkvcgqgf3367j47q5g2ruuw67cxaqxm2t4m42yecsqp92jzs7"
        }
      },
      "response": {
        "paystatus": [
          {
            "bolt11": "lnbcrt1pn2s3xxsp5xvccgadvepzypat5v8u8tstwdvn9ez4908h7ntl4s0ggx76ug4cqpp50qwurth9swdlzphjvjc2qm8sws8jcu0u28y4vt5s7nhr3js0c3vsdqcdserzgryv4ekxunfwp6xjmmwxqyjw5qcqp9rzjqdwjkyvjm7apxnssu4qgwhfkd67ghs6n6k48v6uqczgt88p6tky96qqqduqqqqgqqqqqqqqpqqqqqzsqqc9qxpqysgqw4qfxj30wqn2m2qmcfz2gs6ttszdhkc0kjqk0mgg59tj2cy90wcke4tjzmzakrkvcgqgf3367j47q5g2ruuw67cxaqxm2t4m42yecsqp92jzs7",
            "amount_msat": 400000,
            "payment_hash": "781dc1aee5839bf106f264b0a06cf0740f2c71fc51c9562e90f4ee38ca0fc459",
            "destination": "022d223620a359a47ff7f7ac447c85c46c923da53389221a0054c11c1e3ca31d59",
            "created_at": 1722303718.0730329,
            "groupid": 1,
            "parts": 2,
            "status": "complete",
            "payment_preimage": "af67b48518e78e157db404d13cb42987c31e034634203d10b224302b05fc6c90",
            "amount_sent_msat": 400000
          }
        ]
      }
    }
  ]
}
