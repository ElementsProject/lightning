{
  "$schema": "../rpc-schema-draft.json",
  "type": "object",
  "rpc": "txdiscard",
  "title": "Abandon a transaction from txprepare, release inputs",
  "description": [
    "The **txdiscard** RPC command releases inputs which were reserved for use of the *txid* from lightning-txprepare(7)."
  ],
  "request": {
    "required": [
      "txid"
    ],
    "additionalProperties": false,
    "properties": {
      "txid": {
        "type": "txid",
        "description": [
          "The transaction id, inputs should be unreseverd from."
        ]
      }
    }
  },
  "response": {
    "required": [
      "unsigned_tx",
      "txid"
    ],
    "additionalProperties": false,
    "properties": {
      "unsigned_tx": {
        "type": "hex",
        "description": [
          "The unsigned transaction."
        ]
      },
      "txid": {
        "type": "txid",
        "description": [
          "The transaction id of *unsigned_tx*."
        ]
      }
    },
    "post_return_value_notes": [
      "If there is no matching *txid*, an error is reported. Note that this may happen due to incorrect usage, such as **txdiscard** or **txsend** already being called for *txid*."
    ]
  },
  "errors": [
    "The following error codes may occur:",
    "",
    "- -1: An unknown *txid*."
  ],
  "author": [
    "Rusty Russell <<rusty@rustcorp.com.au>> is mainly responsible."
  ],
  "see_also": [
    "lightning-txprepare(7)",
    "lightning-txsend(7)"
  ],
  "resources": [
    "Main web site: <https://github.com/ElementsProject/lightning>"
  ],
  "examples": [
    {
      "request": {
        "id": "example:txdiscard#1",
        "method": "txdiscard",
        "params": [
          "2b52249cc84f3698d6b324dab40f97d7b11812cf9bad3384ff775621e86df856"
        ]
      },
      "response": {
        "unsigned_tx": "0200000001fb09d48388d44aded94a818b4d21499048958b804e44be571bd3d2710235b87a0000000000fdffffff020000000100000000220020a056363be8c7dbb511098cc50fbca24843e6ed6de03f816465f1998a9a82a09d4183980000000000225120f1393467c717cd50de2760167d4311141a8f750c89f54fd2c900601a7da8434c98000000",
        "txid": "2b52249cc84f3698d6b324dab40f97d7b11812cf9bad3384ff775621e86df856"
      }
    },
    {
      "request": {
        "id": "example:txdiscard#2",
        "method": "txdiscard",
        "params": {
          "txid": "215dcab7a090082d977159212a49895a7951789b71869e6f09e13b7923c7a393"
        }
      },
      "response": {
        "unsigned_tx": "020000000108090ec7f33379421f47fd271d060d0e29869bde5fac8230b3a47e7d89bd6c9f0000000000fdffffff0240420f00000000002200200fefd5034808bec0c94b857b7a3ddeeece7cae1b2101b2f23f1c114b14073f31eaa2f000000000002251205c54c6ff7b25c08e66a91d4256a5ca2c374ab1faf56377e8d65466cf997614ce99000000",
        "txid": "215dcab7a090082d977159212a49895a7951789b71869e6f09e13b7923c7a393"
      }
    }
  ]
}
