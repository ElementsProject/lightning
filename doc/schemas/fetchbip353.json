{
  "$schema": "../rpc-schema-draft.json",
  "type": "object",
  "added": "v25.09",
  "rpc": "fetchbip353",
  "title": "Fetch BIP-353 payment instructions",
  "description": [
    "Fetches BIP-353 payment instructions and the DNSSEC proof."
  ],
  "request": {
    "additionalProperties": false,
    "properties": {
      "address": {
        "type": "string",
        "description": [
          "The BIP-353 address to fetch payment instructions for."
        ]
      }
    },
    "required": [
      "address"
    ]
  },
  "response": {
    "additionalProperties": false,
    "properties": {
      "proof": {
        "type": "string",
        "description": [
          "The hex-encoded DNSSEC proof for the BIP-353 address."
        ]
      },
      "instructions": {
        "type": "array",
        "description": [
          "A list of processed payment instruction objects. Each object either contains information about an onchain or an offchain payment. Both can have an optional amount for fixed amount payments aswell as an optional description provided by the recipient."
        ],
        "items": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "description": {
              "type": "string",
              "description": [
                "Optional description of the payment instruction."
              ]
            },
            "offer": {
              "type": "string",
              "description": [
                "An offer string for a bolt12 payment."
              ]
            },
            "onchain": {
              "type": "string",
              "description": [
                "A bitcoin onchain address."
              ]
            },
            "offchain_amount_msat": {
              "type": "u64",
              "description": [
                "Optional lightning payment amount in millisatoshis, present only if offer is specified."
              ]
            },
            "onchain_amount_sat": {
              "type": "u64",
              "description": [
                "Optional onchain payment amount in satoshis, present only if onchain is specified."
              ]
            }
          }
        }
      }
    },
    "required": [
      "proof",
      "instructions"
    ]
  },
  "errors": [
    "On failure, the following error code may be returned:",
    "",
    "- -32700: Description of the error."
  ],
  "author": [
    "daywalker90 is mainly responsible."
  ],
  "examples": [
    {
      "description": [
        "Example of fetching BIP-353 payment details."
      ],
      "request": {
        "id": "example:fetchbip353#1",
        "method": "fetchbip353",
        "params": {
          "address": "send.some@satsto.me"
        }
      },
      "response": {
        "proof": "0473656e6404736f6d650475736572105f626974636f696e2d7061796d656e740673617473746f026d65000005000100000dc3002c046d6174740475736572105f626974636f696e2d7061796d656e740b6d617474636f72616c6c6f03636f6d000473656e6404736f6d650475736572105f626974636f696e2d7061796d656e740673617473746f026d6500002e000100000dc3005d00050d0600000e106892efff688065e7d40e0673617473746f026d65000a2d76ac28a6152c17628a809c791ef7fae00ea605fb273e295d8821f096bab4d446b9835303f9b9c838ec0a73c2309f3e9b7209177dac160e19d9a12facad43046d6174740475736572105f626974636f696e2d7061796d656e740b6d617474636f72616c6c6f03636f6d000010000100000dc301ecff626974636f696e3a626331717a7477793678656e337a647474377a3076726761706d6a74667a3861636a6b6670356670376c3f6c6e6f3d6c6e6f317a7235717975677167736b726b37306b716d7571377633646e7232666e6d68756b7073396e386875743438766b7170716e736b743273767371776a616b70376b36707968746b7578773779326b716d73786c777275687a7176307a736e686839713374397868783339737563367173723037656b6d3565736479756d307736366d6e783876647175777670376470356a70376a337635637036616a3077333239666e6b7171763630713936737a356e6b726335723935716666783030327135337471646beb3878396d32746d7438356a74706d63796376666e727078336c723435683267376e6133736563377867756374667a7a636d386a6a71746a3579613237746536306a303376707430767139746d326e3979786c32686e67666e6d79676573613235733475347a6c78657771707670393478743772757234726878756e776b74686b39766c79336c6d356868307071763461796d6371656a6c6773736e6c707a776c6767796b6b616a7037796a73356a76723261676b79797063646c6a323830637934366a70796e73657a72636a326b7761326c797238787664366c666b706834787278746b327863336c7071046d6174740475736572105f626974636f696e2d7061796d656e740b6d617474636f72616c6c6f03636f6d00002e000100000dc3006300100d0500000e106894172f68818d17a7150b6d617474636f72616c6c6f03636f6d00ba9ee201fe8e135c732d61f8ba32580a7a4e6f3e490cd520b7e4afe9004f257c1b986dd2ef8d4588f4d3810da04249c48b88a6c284f43be5703220ee2a9553200673617473746f026d6500002b000100000e100024c4010d02a229c6d54c38b7bb723b48a6aceab1e7fdb6ae2a22b9b57c5ca6b942ed8ea2fe0673617473746f026d6500002b000100000e1000245b360d022333b5ea25720720a8c54553c0641e8ccb8a917af20c694f10bf7ce3851e3f6e0673617473746f026d6500002e000100000e100096002b080200000e106894c3f568790665bd27026d65005132e1fc7de64a0d8c0e5170405d7ed11cd5b222901bc7d55358e6e9c2d07b296f047a0b2cdd3430f15d29ceb33a666b35544b3d1f604de40d827e3db4a93ef8d1eec3f01d43ad6b97eca9775c0c3ff24a0bb50e1156d9856605015e36eae6e479c87e18a814dc0d92c9d252c8ec986bed12706528a659d2abdc8cd80d4e86fd026d6500002b0001000111ee0024b12808027708c8a6d5d72b63214bbff50cb54553f7e07a1fa5e9074bd8d63c43102d8559026d6500002e0001000111ee0113002b080100015180689262c068813130b56900b09edd26bd796970d8c29b4d3b197d20756b79fda8caac09f44ec188f5d285e0d74e54d40760c14c1049b6c50689b7abb9d7ccdf47abced5adea5787d25c583b0893b9087bbab6ab583da53cf9e2674393ead86bc0c7f359d15634def73c53082d0c68333204eb602634add53d13a8c9375c797aac172bbcc54e73e6dc9b5345b2d497af2f66047e053f70beee176c0d50778017cb913aef27b346f1b0e86ad535a8b9eb2c0ba783a65a19992f680542d45ac0b66fe63f8ffca04793daf81057a0863208ac20e7e00ae7f7fe092c38710fc59e9c0a43b2d33cdb4768e68b34b6cdacda67d38b118174ce9e05605b883ba9435804cab5a7c39c056c2f3917fe5b00003000010000856e01080100030803010001b11b182a464c3adc6535aa59613bda7a61cac86945c20b773095941194f4b9f516e8bd924b1e50e3fe83918b51e54529d4e5a1e45303df8462241d5e05979979ae5bf9c6c598c08a496e17f3bd3732d5aebe62667b61db1bbe178f27ac99408165a230d6aee78348e6c67789541f845b2ada96667f8dd16ae44f9e260c4a138b3bb1015965ebe609434a06464bd7d29bac47c3017e83c0f89bca1a9e3bdd0813715f3484292df589bc632e27d37efc02837cb85d770d5bd53a36edc99a8294771aa93cf22406f5506c8cf850ed85c1a475dee5c2d3700b3f5631d903524b849995c20cb407ed411f70b428ae3d642716fe239335aa961a752e67fb6dca0bf72900003000010000856e01080101030803010001acffb409bcc939f831f7a1e5ec88f7a59255ec53040be432027390a4ce896d6f9086f3c5e177fbfe118163aaec7af1462c47945944c4e2c026be5e98bbcded25978272e1e3e079c5094d573f0e83c92f02b32d3513b1550b826929c80dd0f92cac966d17769fd5867b647c3f38029abdc48152eb8f207159ecc5d232c7c1537c79f4b7ac28ff11682f21681bf6d6aba555032bf6f9f036beb2aaa5b3778d6eebfba6bf9ea191be4ab0caea759e2f773a1f9029c73ecb8d5735b9321db085f1b8e2d8038fe2941992548cee0d67dd4547e11dd63af9c9fc1c5466fb684cf009d7197c2cf79e792ab501e6a8a1ca519af2cb9b5f6367e94c0d47502451357be1b500003000010000856e01080100030803010001b6aec4b48567e2925a2d9c4fa4c96e6dddf86215a9bd8dd579c38ccb1199ed1be89946a7f72fc2633909a2792d0eed1b5afb2ee4c78d865a76d6cd9369d999c96af6be0a2274b8f2e9e0a0065bd20257570f08bc14c16f5616426881a83dbce6926e391c138a2ec317efa7349264de2e791c9b7d4a6048ee6eedf27bf1ece398ff0d229f18377cb1f6b98d1228ef217b8146c0c73851b89a6fc37c621ca187e16428a743ffea0072e185ef93e39525cee3ad01e0c94d2e511c8c313322c29ab91631e1856049a36898684c3056e5997473816fb547acb0be6e660bdfa89a5cb28b3669d8625f3f018c7b3b8a4860e774ee8261811ce7f96c461bc162c1a374f300003000010000856e01080101030803010001af7a8deba49d995a792aefc80263e991efdbc86138a931deb2c65d5682eab5d3b03738e3dfdc89d96da64c86c0224d9ce02514d285da3068b19054e5e787b2969058e98e12566c8c808c40c0b769e1db1a24a1bd9b31e303184a31fc7bb56b85bbba8abc02cd5040a444a36d47695969849e16ad856bb58e8fac8855224400319bdab224d83fc0e66aab32ff74bfeaf0f91c454e6850a1295207bbd4cdde8f6ffb08faa9755c2e3284efa01f99393e18786cb132f1e66ebc6517318e1ce8a3b7337ebb54d035ab57d9706ecd9350d4afacd825e43c8668eece89819caf6817af62dc4fbd82f0e33f6647b2b6bda175f14607f59f4635451e6b27df282ef73d8700002e00010000856e0113003008000002a30068993280687d83004f66005a48a604886288cc78c2a35e48816b7a182a349f397f2cd4c1bfa6de634acc9b9b0d2236fd8f257fa8641ae46da7ca17a697c965beabb5477ea6d0cc198b77c8cb9398f8f6fd36c7dc32439409625209b7c3d12108f2c973ea735f764ee629135ed67f016e63949a84e1f120b5146a27221180a0fbd0d632cc900c488b709260f2d479e6d787f2f9fa31222cacdbb696ddc3789744c691d27a8be4486fd7a74b51e417dfb9a9ba8f148f468c536debb4a7dc3803ea6213c55c3efd19cbf29059e5e460803e9656bdac7feacc38bf2bb8a9a3cbc5025841c1b71a58246cab007209bf2f22d4fdd4b80fe6d3bce9e5d2bb80df1949d62f09feb3a5bffe2a1bc6ab026d6500003000010000096400880100030803010001bfe96cdfe309deee4c579edbbfb50264719c35e25f64a525f81fe2479be4a907bfa9ce8b048ec167217690a145208507367cfec4ab4f9726cf55ecb79bf287836df0e0e946463a56e01b1a7d2e98681274f42ceb5817b1e253920b50f2e63f4be1a7c41f948a4a7235259a58eb0a9e4ccca370e2b3d363e4c289b897ffa329ab026d6500003000010000096400880100030803010001dc19d04c7cfe5a924fd292914b60a8c055bdfb8cadb2515a280a886e0ab9a9c9da344506657b660f369f91032cbcf2f15dc1adfabad9862869c5e6742de8e74b5049c25871365f3d3b215d1513838c31225085342510c6f3a9bac0c704c74dd5955c300998eae7af0974e14fc57732b03c8c1da2dc6b7544e28c13314920a2b9026d6500003000010000096401080101030803010001c103be3a2aa47686ab01ba1b23799ff108d0c0530dfe35cebdd320b7abc851d1abf191378d155127e17fb029628385482b34ac3b042093d6097574b36ee277e31d20003272871bc76d1762dab33397eaae97d853932da5a96886a1b7c61bc52fcd1f1f23c7026a48fa1b190cb8b97d42b45b49948c45187efec3c7867812627a0220e5497c36ee4e92452fb5c1bda2dceaebf71c0e3909a61a5d6498dfc41c71cd0412dbbf442e43c378c9fb4043a1523cfd7ce320ce29fce606db73a8c78150b9808db8bb71898858d7a48ead8870f364b6e271ac642fe3160de3bc44b5a89ccf9e21e2ae5a877253db495f611a8a16a657f7ad9aeb906d5bc9c86f2883b5ed026d6500002e00010000096401160030080100000e106894c3f568790665b128026d6500b7cb55cd142698d7eef9770d2b95e57b7ce5bcb0936e686b68008160dcafd6ebf716b1bc16f20859071ecfd8e64c30673f1f2106f05e534f28d8c751e2fa98798633d0488b9ce0c4549bf66b41f31025d1ea4e78803aa8de96ae93e7a5b629727751e7e1ccea698e02d7ab8cddfa9c96cb672b35fc86c70d4c66fa1f3e721e571ad67692afb44d60dc9b35b89e71b487cff66975a91c795b3a5659dbc8727d2f34893b57ff192865ba637dbb33ad9c85b87ff54e15396bbceb749f6aa1446670d507b1d20d19381b595d9b05718525b31d100495345600719fdd1914f46568ccea49bbc64db41c55723a8a321b72e98a8bd8db680d74bc0a98e5c8159313e3eb0673617473746f026d6500003000010000546000440101030d79bca014d652db03985a4edc2ada39c35f7daf8b86656ba6cd2df96f1da8c05f81d584aad62ee3c42ac7cbd29c5d35b9fa0b3d568a556ae9794d8cb02bae1bcb0673617473746f026d6500003000010000546000440101030d705e7216377fa1f2b1c66e3da6b4b3effe7a599cd7d96af1ca40208e710086a690e92bff664307fe8fcdf4013c0b0dc0464e68da0559055b4df117be66e3240c0673617473746f026d6500003000010000546000440100030dc1eb1a5eec915539ce29899329a8fe7a0583cdb81fbadad5296fb669aa21f611de6f1a99fceb853db2d1ad98d600b8d4af22b0b3b0fe215c3fe14ba2428b79810673617473746f026d6500002e000100005460005d00300d0200093a8068944f8a6881c5725b360673617473746f026d6500cabe9f33845beab05e40f96a4dbe7922b7cc66aeab57f83a2aa9c65ea65cd6ac0d5cc4069e4f4b09fa8fe6704acdb2503c59a6d2c3090d4d0a4d0bb3a1ebd6180673617473746f026d6500002e000100005460005d00300d0200093a8068944f8a6881c572c4010673617473746f026d65006b3e8d4b4374f0520be2f1702c6183c6eca76715fba52346dc018a62e0bf883f4e62e12f31ec1d2e6490fa22c318e1fe09a7eca5310f2d757870b2574e286f870b6d617474636f72616c6c6f03636f6d00002b00010000440e0024e2f50d02f0e161567d468087ff27b051abc94476178a7cb635da1aa705e05c77ca81de520b6d617474636f72616c6c6f03636f6d00002b00010000440e00249f000d02594d2813e04a1d2660ff3c0afc5579b9ec0fe72cc206dc6f248bbe6dd652e1950b6d617474636f72616c6c6f03636f6d00002e00010000440e0057002b0d0200015180688acac168817fd9504103636f6d007cb7824c04378b3839cc1332fc31802aa7e62e5e33db6e396788f399fef6cdbb8fee96d2fe3d39543c56d4a03c516964b78f56cb9743ac6bec03c0cbc4dce6df03636f6d00002b00010000cdad00244d060d028acbb0cd28f41250a80a491389424d341522d946b0da0c0291f2d3d771d7805a03636f6d00002e00010000cdad0113002b080100015180689262c068813130b569000aa795756b4312d306f2f2cce1261fc045f964dca788d038b201abef0fd1651040f4a64706ff07ba2d5eefca85b58f6795d65767aa3d92041c798c222676fd0990f373df59a51c8739dc1fd1d60d1e37c0452aa842c0ceb501e9535effc6ee1f5192fb0dbd49e0aa798a0dc7e873ebc5d42b7789a575b71b664cbd15e497f466d7ee2a442b79b5bc0f10778ef7ff64a1366a0a44dddf19bbf37c6d5d070917a238e59a062e78c45da5c1c9a8dac64a2d9cb0f0aef24a7947672789f46a7cbd1eb5d40a10521958a14f243b384bbcdc7973d000f32a5805c5732477058831c0edd48b52a3d39e6fb2b0738c22c95a1a4b0b07f1809e9f2658a5c12c5ccfa12be303636f6d00003000010000515800440101030db71f0465101ddbe2bf0c9455d12fa16c1cda44f4bf1ba2553418ad1f3aa9b06973f21b84eb532cf4035ee8d4832ca26d89306a7d32560c0cb0129d450ac1083503636f6d00003000010000515800440100030df17b60fb56d522f8634153e785c0a978532ea76de39d34bb356d3d042e07f29f7b992176cc83acef7b78ea750425203b18f2b8228b3cdd2bc7eb13c3e3035a7e03636f6d00002e000100005158005700300d010001518068920efb687e474f4d0603636f6d00b2e671a909bab6910567084b8347cb199b924a4acf9e1a2602ba0adaa3b056890609bd88ee767161672bbe89466e2c035c0bce3a755f33b910047fa27a90b9c20b6d617474636f72616c6c6f03636f6d00003000010000440e00440101030dec7c1fa1752495c42d2224eace96ed74144e9cb811608dd91594974bdc723fdc5b38a37c3340f1deca68a7ec82248822954b2994de5ac99ff6e9db95fd42c94b0b6d617474636f72616c6c6f03636f6d00003000010000440e00440100030dfd9dbc34cb5053a2c4a6b3d0dc60fc65d8a992dc1e080f6deeddba7fe6b25217730de64c9a1ce986b3f81f556881fe0e7b5b20c8ae381c4fefdbc311aa7d22ee0b6d617474636f72616c6c6f03636f6d00002e00010000440e006300300d0200093a8068904cdc687dc2c4e2f50b6d617474636f72616c6c6f03636f6d002bc27f4ae3fca9bb992bfcd397da49837e4cb87f9b8d3aa77e8f9a9ff24e53b24999f6a69db44eae621b94e5a775ad60a0d2f8f6d04f873cc075024bb12648c5",
        "instructions": [
          {
            "offer": "lno1zr5qyugqgskrk70kqmuq7v3dnr2fnmhukps9n8hut48vkqpqnskt2svsqwjakp7k6pyhtkuxw7y2kqmsxlwruhzqv0zsnhh9q3t9xhx39suc6qsr07ekm5esdyum0w66mnx8vdquwvp7dp5jp7j3v5cp6aj0w329fnkqqv60q96sz5nkrc5r95qffx002q53tqdk8x9m2tmt85jtpmcycvfnrpx3lr45h2g7na3sec7xguctfzzcm8jjqtj5ya27te60j03vpt0vq9tm2n9yxl2hngfnmygesa25s4u4zlxewqpvp94xt7rur4rhxunwkthk9vly3lm5hh0pqv4aymcqejlgssnlpzwlggykkajp7yjs5jvr2agkyypcdlj280cy46jpynsezrcj2kwa2lyr8xvd6lfkph4xrxtk2xc3lpq"
          },
          {
            "onchain": "bc1qztwy6xen3zdtt7z0vrgapmjtfz8acjkfp5fp7l"
          }
        ]
      }
    }
  ]
}
